var zscContract = web3.eth.contract([{ "constant": false, "inputs": [{ "name": "y", "type": "bytes32[2]" }], "name": "register", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }], "name": "fund", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "epochLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "bytes32" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "name": "acc", "outputs": [{ "name": "", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "L", "type": "bytes32[2][]" }, { "name": "R", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2][]" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "transfer", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "burn", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "bytes32" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "name": "pTransfers", "outputs": [{ "name": "", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "bytes32" }], "name": "lastRollOver", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "_coin", "type": "address" }, { "name": "_zether", "type": "address" }, { "name": "_burn", "type": "address" }, { "name": "_epochLength", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [], "name": "RegistrationOccurred", "type": "event" }, { "anonymous": false, "inputs": [], "name": "FundOccurred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "parties", "type": "bytes32[2][]" }], "name": "TransferOccurred", "type": "event" }, { "anonymous": false, "inputs": [], "name": "BurnOccurred", "type": "event" }]);
var zsc; // this is sketchy but works.

var demo = {
    deployZSC: function(coin) {
        var zetherverifierContract = web3.eth.contract([{ "constant": true, "inputs": [{ "name": "CLn", "type": "bytes32[2][]" }, { "name": "CRn", "type": "bytes32[2][]" }, { "name": "L", "type": "bytes32[2][]" }, { "name": "R", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2][]" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyTransfer", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "baseSize", "outputs": [{ "name": "size", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "size", "type": "uint256" }], "name": "extendBase", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
        var burnverifierContract = web3.eth.contract([{ "constant": true, "inputs": [{ "components": [{ "name": "x", "type": "uint256" }, { "name": "y", "type": "uint256" }], "name": "p1", "type": "tuple" }, { "components": [{ "name": "x", "type": "uint256" }, { "name": "y", "type": "uint256" }], "name": "p2", "type": "tuple" }], "name": "add", "outputs": [{ "components": [{ "name": "x", "type": "uint256" }, { "name": "y", "type": "uint256" }], "name": "r", "type": "tuple" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "CLn", "type": "bytes32[2]" }, { "name": "CRn", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyBurn", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
        var zkpContract = web3.eth.contract([{ "constant": true, "inputs": [{ "name": "CL", "type": "bytes32[2][]" }, { "name": "CR", "type": "bytes32[2][]" }, { "name": "L", "type": "bytes32[2][]" }, { "name": "R", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2][]" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyTransfer", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "CLn", "type": "bytes32[2]" }, { "name": "CRn", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyBurn", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "_zether", "type": "address" }, { "name": "_burn", "type": "address" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
        var _zether;
        var _burn;
        var zetherverifier = zetherverifierContract.new({
            from: web3.eth.accounts[0],
            data: '0x60806040526200001f60026200025d640100000000026401000000009004565b6006906040620000319291906200059b565b503480156200003f57600080fd5b506200008f6040805190810160405280600181526020017f470000000000000000000000000000000000000000000000000000000000000081525062000312640100000000026401000000009004565b60026000820151816000015560208201518160010155905050620000f76040805190810160405280600181526020017f560000000000000000000000000000000000000000000000000000000000000081525062000312640100000000026401000000009004565b6004600082015181600001556020820151816001015590505060008090505b604081101562000256576000620001726040805190810160405280600181526020017f47000000000000000000000000000000000000000000000000000000000000008152508362000395640100000000026401000000009004565b9080600181540180825580915050906001820390600052602060002090600202016000909192909190915060008201518160000155602082015181600101555050506001620002066040805190810160405280600181526020017f48000000000000000000000000000000000000000000000000000000000000008152508362000395640100000000026401000000009004565b908060018154018082558091505090600182039060005260206000209060020201600090919290919091506000820151816000015560208201518160010155505050808060010191505062000116565b506200073d565b62000267620005e0565b60018160006040811015156200027957fe5b602002018181525050818160016040811015156200029357fe5b6020020181815250506000600290505b60408110156200030c57620002e6838360018403604081101515620002c457fe5b60200201516200041b6401000000000262003406179091906401000000009004565b8282604081101515620002f557fe5b6020020181815250508080600101915050620002a3565b50919050565b6200031c62000604565b6200038e7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478360405160200162000354919062000698565b60405160208183030381529060405280519060200120600190048115156200037857fe5b0662000453640100000000026401000000009004565b9050919050565b6200039f62000604565b620004137f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478484604051602001620003d9929190620006b1565b6040516020818303038152906040528051906020012060019004811515620003fd57fe5b0662000453640100000000026401000000009004565b905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156200044857fe5b828409905092915050565b6200045d62000604565b60005b600115620005105760006003620004888560036200052d640100000000026401000000009004565b019050620004d681600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4701811515620004c057fe5b046200052d640100000000026401000000009004565b915080620004f58360026200052d640100000000026401000000009004565b141562000503575062000510565b6001840193505062000460565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa15156200058f57600080fd5b80519250505092915050565b8260408101928215620005cd579160200282015b82811115620005cc578251825591602001919060010190620005af565b5b509050620005dc91906200061e565b5090565b61080060405190810160405280604090602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6200064391905b808211156200063f57600081600090555060010162000625565b5090565b90565b60006200065382620006dd565b6200065f8185620006e8565b935062000671818560208601620006fd565b80840191505092915050565b620006926200068c82620006f3565b62000733565b82525050565b6000620006a6828462000646565b915081905092915050565b6000620006bf828562000646565b9150620006cd82846200067d565b6020820191508190509392505050565b600081519050919050565b600081905092915050565b6000819050919050565b60005b838110156200071d57808201518184015260208101905062000700565b838111156200072d576000848401525b50505050565b6000819050919050565b615791806200074d6000396000f3fe608060405260043610610051576000357c0100000000000000000000000000000000000000000000000000000000900480631659e67d146100565780634e8ee0e214610093578063a00547ab146100be575b600080fd5b34801561006257600080fd5b5061007d60048036036100789190810190614b0a565b6100da565b60405161008a91906151b4565b60405180910390f35b34801561009f57600080fd5b506100a861056a565b6040516100b591906152af565b60405180910390f35b6100d860048036036100d39190810190614c35565b610576565b005b60006100e4614280565b6000865190508060008054905010151515610134576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161012b9061520f565b60405180910390fd5b8060405190808252806020026020018201604052801561016e57816020015b61015b6142cb565b8152602001906001900390816101535790505b508260000181905250806040519080825280602002602001820160405280156101b157816020015b61019e6142cb565b8152602001906001900390816101965790505b508260200181905250806040519080825280602002602001820160405280156101f457816020015b6101e16142cb565b8152602001906001900390816101d95790505b5082604001819052508060405190808252806020026020018201604052801561023757816020015b6102246142cb565b81526020019060019003908161021c5790505b50826080018190525060008090505b8181101561049b5760408051908101604052808d8381518110151561026757fe5b90602001906020020151600060028110151561027f57fe5b60200201516001900481526020018d8381518110151561029b57fe5b9060200190602002015160016002811015156102b357fe5b6020020151600190048152508360000151828151811015156102d157fe5b9060200190602002018190525060408051908101604052808c838151811015156102f757fe5b90602001906020020151600060028110151561030f57fe5b60200201516001900481526020018c8381518110151561032b57fe5b90602001906020020151600160028110151561034357fe5b60200201516001900481525083602001518281518110151561036157fe5b9060200190602002018190525060408051908101604052808b8381518110151561038757fe5b90602001906020020151600060028110151561039f57fe5b60200201516001900481526020018b838151811015156103bb57fe5b9060200190602002015160016002811015156103d357fe5b6020020151600190048152508360400151828151811015156103f157fe5b906020019060200201819052506040805190810160405280898381518110151561041757fe5b90602001906020020151600060028110151561042f57fe5b6020020151600190048152602001898381518110151561044b57fe5b90602001906020020151600160028110151561046357fe5b60200201516001900481525083608001518281518110151561048157fe5b906020019060200201819052508080600101915050610246565b5060408051908101604052808960006002811015156104b657fe5b60200201516001900481526020018960016002811015156104d357fe5b6020020151600190048152508260600181905250858260a0018181525050604080519081016040528086600060028110151561050b57fe5b602002015160019004815260200186600160028110151561052857fe5b6020020151600190048152508260c001819052506105446142e5565b61054d8561069f565b90506105598382610f03565b935050505098975050505050505050565b60008080549050905090565b6000808054905090505b8181101561069b5760006105c96040805190810160405280600181526020017f4700000000000000000000000000000000000000000000000000000000000000815250836132ab565b908060018154018082558091505090600182039060005260206000209060020201600090919290919091506000820151816000015560208201518160010155505050600161064c6040805190810160405280600181526020017f4800000000000000000000000000000000000000000000000000000000000000815250836132ab565b9080600181540180825580915050906001820390600052602060002090600202016000909192909190915060008201518160000155602082015181600101555050508080600101915050610580565b5050565b6106a76142e5565b60408051908101604052806106bd84600061331b565b81526020016106cd84602061331b565b815250816020018190525060408051908101604052806106ee84604061331b565b81526020016106fe84606061331b565b81525081604001819052506040805190810160405280604080519081016040528061072a86608061331b565b815260200161073a8660a061331b565b815250815260200160408051908101604052806107588660c061331b565b81526020016107688660e061331b565b81525081525081606001819052506107828261010061331b565b8160c00181815250506107978261012061331b565b8160800181815250506107ac8261014061331b565b8160a00181815250506107bd61435d565b6107c98361016061331b565b8160000181815250506107de8361018061331b565b8160200181815250506107f3836101a061331b565b8160400181815250508082610100018190525061080e61437f565b60008090505b60068110156108ce57604080519081016040528061083987604085026101c00161331b565b815260200161084f87604085026101e00161331b565b81525082600001518260068110151561086457fe5b6020020181905250604080519081016040528061088b87604085600601026101c00161331b565b81526020016108a487604085600601026101e00161331b565b8152508260200151826006811015156108b957fe5b60200201819052508080600101915050610814565b506108e18460806006026101c00161331b565b8160400181815250506108fc8460806006026101e00161331b565b816060018181525050808361012001819052506109176143b5565b600060c06102806105008851030381151561092e57fe5b04905060408051908101604052806109488861050061331b565b81526020016109598861052061331b565b8152508260000181905250604080519081016040528061097b8861054061331b565b815260200161098c8861056061331b565b815250826020018190525060408051908101604052806109ae8861058061331b565b81526020016109bf886105a061331b565b815250826040018190525060408051908101604052806109e1886105c061331b565b81526020016109f2886105e061331b565b81525082606001819052506040805190810160405280610a148861060061331b565b8152602001610a258861062061331b565b8152508260a001819052506040805190810160405280610a478861064061331b565b8152602001610a588861066061331b565b8152508260c001819052506040805190810160405280610a7a8861068061331b565b8152602001610a8b886106a061331b565b8152508260e001819052506040805190810160405280610aad886106c061331b565b8152602001610abe886106e061331b565b8152508261010001819052506040805190810160405280610ae18861070061331b565b8152602001610af28861072061331b565b8152508261014001819052506040805190810160405280610b158861074061331b565b8152602001610b268861076061331b565b81525082610160018190525060018103604051908082528060200260200182016040528015610b6f57816020015b610b5c614468565b815260200190600190039081610b545790505b5082610180018190525060008090505b60018203811015610c2657610b9b87826020026107800161331b565b83610180015182815181101515610bae57fe5b906020019060200201516000600281101515610bc657fe5b602002018181525050610be5876020836001860301026107800161331b565b83610180015182815181101515610bf857fe5b906020019060200201516001600281101515610c1057fe5b6020020181815250508080600101915050610b7f565b50600281811515610c3357fe5b04604051908082528060200260200182016040528015610c6d57816020015b610c5a61448a565b815260200190600190039081610c525790505b508260800181905250600281811515610c8257fe5b04604051908082528060200260200182016040528015610cbc57816020015b610ca961448a565b815260200190600190039081610ca15790505b5082610120018190525060008090505b600282811515610cd857fe5b04811015610ead576040805190810160405280610cfe896040858701026107400161331b565b8152602001610d16896040858701026107600161331b565b815250836080015182815181101515610d2b57fe5b906020019060200201516000600281101515610d4357fe5b60200201819052506040805190810160405280610d6c896040850260608702610740010161331b565b8152602001610d87896040850260608702610760010161331b565b815250836080015182815181101515610d9c57fe5b906020019060200201516001600281101515610db457fe5b60200201819052506040805190810160405280610ddd896040850260808702610740010161331b565b8152602001610df8896040850260808702610760010161331b565b81525083610120015182815181101515610e0e57fe5b906020019060200201516000600281101515610e2657fe5b60200201819052506040805190810160405280610e4f896040850260a08702610740010161331b565b8152602001610e6a896040850260a08702610760010161331b565b81525083610120015182815181101515610e8057fe5b906020019060200201516001600281101515610e9857fe5b60200201819052508080600101915050610ccc565b5080856000018181525050610ec98660c083026107400161331b565b826101a0018181525050610ee48660c083026107600161331b565b826101c0018181525050818560e0018190525084945050505050919050565b6000610f0d6144b8565b610fa0610f658560a0015186606001518760000151886020015189604001518a60800151604051602001610f4696959493929190615436565b6040516020818303038152906040528051906020012060019004613334565b84602001518560400151604051602001610f81939291906154b3565b6040516020818303038152906040528051906020012060019004613334565b816000018181525050610fb68160000151613369565b8160200181905250610ff58160000151604051602001610fd691906152af565b6040516020818303038152906040528051906020012060019004613334565b8160400181815250506110198160400151826040015161340690919063ffffffff16565b81606001818152505061103d8160400151826060015161340690919063ffffffff16565b81608001818152505060008090505b6002604081151561105957fe5b048110156110e75761107b8160020a836060015161340690919063ffffffff16565b8260a001518260408110151561108d57fe5b6020020181815250506110b08160020a836080015161340690919063ffffffff16565b8260a00151600260408115156110c257fe5b0483016040811015156110d157fe5b602002018181525050808060010191505061104c565b506111258160400151846060015160405160200161110692919061540d565b6040516020818303038152906040528051906020012060019004613334565b8161014001818152505061116081604001516111528360800151846060015161343d90919063ffffffff16565b61340690919063ffffffff16565b8160c00181815250506111f06111a98260c0015161119b6002604081151561118457fe5b0460020a8560c0015161340690919063ffffffff16565b61347490919063ffffffff16565b6111e26111c78460600151856040015161347490919063ffffffff16565b6111d485602001516134b4565b61340690919063ffffffff16565b61347490919063ffffffff16565b8160e00181815250506112646112228460600151600060028110151561121257fe5b60200201518361014001516134ff565b61125f8560600151600160028110151561123857fe5b602002015161125a85610140015186610140015161340690919063ffffffff16565b6134ff565b61353a565b8161010001819052506112888160e001518460c0015161347490919063ffffffff16565b8161012001818152505061129a6143b5565b8360e0015190506112a9614525565b6112b16145a4565b60408051908101604052808461014001518152602001846101600151815250905061134a846101400151846080015185610120015186600001518760200151886040015189606001518a60a001518b60c001518c60e001518d61010001518c60405160200161132b9c9b9a999897969594939291906152ca565b6040516020818303038152906040528051906020012060019004613334565b826000018181525050856000015160405190808252806020026020018201604052801561139157816020015b61137e614468565b8152602001906001900390816113765790505b5082602001819052508160000151826020015160008151811015156113b257fe5b9060200190602002015160006002811015156113ca57fe5b6020020181815250508160000151826020015160008151811015156113eb57fe5b90602001906020020151600160028110151561140357fe5b6020020181815250506000600190505b8660000151811015611640578361018001516001820381518110151561143557fe5b90602001906020020151600060028110151561144d57fe5b602002015183602001518281518110151561146457fe5b90602001906020020151600060028110151561147c57fe5b6020020181815250508361018001516001820381518110151561149b57fe5b9060200190602002015160016002811015156114b357fe5b60200201518360200151828151811015156114ca57fe5b9060200190602002015160016002811015156114e257fe5b60200201818152505061155b83602001518281518110151561150057fe5b90602001906020020151600060028110151561151857fe5b60200201518460200151600081518110151561153057fe5b90602001906020020151600060028110151561154857fe5b602002015161347490919063ffffffff16565b8360200151600081518110151561156e57fe5b90602001906020020151600060028110151561158657fe5b6020020181815250506115ff8360200151828151811015156115a457fe5b9060200190602002015160016002811015156115bc57fe5b6020020151846020015160008151811015156115d457fe5b9060200190602002015160016002811015156115ec57fe5b602002015161347490919063ffffffff16565b8360200151600081518110151561161257fe5b90602001906020020151600160028110151561162a57fe5b6020020181815250508080600101915050611413565b506116496145d2565b60008090505b8760000151811015611764576116d7826116d260008481548110151561167157fe5b9060005260206000209060020201604080519081016040529081600082015481526020016001820154815250508760200151858151811015156116b057fe5b9060200190602002015160006002811015156116c857fe5b60200201516134ff565b61353a565b9150611755826117506001848154811015156116ef57fe5b90600052602060002090600202016040805190810160405290816000820154815260200160018201548152505087602001518581518110151561172e57fe5b90602001906020020151600160028110151561174657fe5b60200201516134ff565b61353a565b9150808060010191505061164f565b506117c461178761177d866020015186600001516134ff565b866000015161353a565b6117bf836117ba600460408051908101604052908160008201548152602001600182015481525050896101a001516134ff565b61353a565b613580565b1515611805576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117fc9061522f565b60405180910390fd5b60008090505b87600001518110156119945761189c61185f85602001518381518110151561182f57fe5b90602001906020020151600060028110151561184757fe5b6020020151866000015161347490919063ffffffff16565b85602001518381518110151561187157fe5b90602001906020020151600060028110151561188957fe5b602002015161340690919063ffffffff16565b8460200151828151811015156118ae57fe5b9060200190602002015160006002811015156118c657fe5b6020020181815250506119546119178560200151838151811015156118e757fe5b9060200190602002015160016002811015156118ff57fe5b6020020151866000015161347490919063ffffffff16565b85602001518381518110151561192957fe5b90602001906020020151600160028110151561194157fe5b602002015161340690919063ffffffff16565b84602001518281518110151561196657fe5b90602001906020020151600160028110151561197e57fe5b602002018181525050808060010191505061180b565b506040805190810160405280600081526020016000815250905060008090505b8760000151811015611ac957611a3c82611a376000848154811015156119d657fe5b906000526020600020906002020160408051908101604052908160008201548152602001600182015481525050876020015185815181101515611a1557fe5b906020019060200201516000600281101515611a2d57fe5b60200201516134ff565b61353a565b9150611aba82611ab5600184815481101515611a5457fe5b906000526020600020906002020160408051908101604052908160008201548152602001600182015481525050876020015185815181101515611a9357fe5b906020019060200201516001600281101515611aab57fe5b60200201516134ff565b61353a565b915080806001019150506119b4565b50611b29611aec611ae2866040015186600001516134ff565b866060015161353a565b611b2483611b1f600460408051908101604052908160008201548152602001600182015481525050896101c001516134ff565b61353a565b613580565b1515611b6a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611b619061526f565b60405180910390fd5b826000015183602001516000815181101515611b8257fe5b906020019060200201516000600281101515611b9a57fe5b602002018181525050826000015183602001516000815181101515611bbb57fe5b906020019060200201516001600281101515611bd357fe5b6020020181815250506000600190505b8760000151811015611e105784610180015160018203815181101515611c0557fe5b906020019060200201516000600281101515611c1d57fe5b6020020151846020015182815181101515611c3457fe5b906020019060200201516000600281101515611c4c57fe5b60200201818152505084610180015160018203815181101515611c6b57fe5b906020019060200201516001600281101515611c8357fe5b6020020151846020015182815181101515611c9a57fe5b906020019060200201516001600281101515611cb257fe5b602002018181525050611d2b846020015182815181101515611cd057fe5b906020019060200201516000600281101515611ce857fe5b602002015185602001516000815181101515611d0057fe5b906020019060200201516000600281101515611d1857fe5b602002015161347490919063ffffffff16565b84602001516000815181101515611d3e57fe5b906020019060200201516000600281101515611d5657fe5b602002018181525050611dcf846020015182815181101515611d7457fe5b906020019060200201516001600281101515611d8c57fe5b602002015185602001516000815181101515611da457fe5b906020019060200201516001600281101515611dbc57fe5b602002015161347490919063ffffffff16565b84602001516000815181101515611de257fe5b906020019060200201516001600281101515611dfa57fe5b6020020181815250508080600101915050611be3565b50611e1e83600001516135a8565b836040018181525050611e4e8860600151611e498660a00151611e4487604001516135de565b6134ff565b61353a565b8360600181905250611e688360200151896040015161360a565b8360e00181905250611e828360200151896080015161360a565b83610100018190525060008090505b60028860000151811515611ea157fe5b048110156120e15760008090505b60028110156120d35760008090505b6002811015611f6e57611f348660200151828560020201815181101515611ee157fe5b9060200190602002015183600281101515611ef857fe5b60200201518760c0015183600281101515611f0f57fe5b602002015184600281101515611f2157fe5b602002015161343d90919063ffffffff16565b8660c0015182600281101515611f4657fe5b602002015183600281101515611f5857fe5b6020020181815250508080600101915050611ebe565b50611fe8611fde8660e0015184815181101515611f8757fe5b9060200190602002015183600281101515611f9e57fe5b6020020151611fd9896080015186815181101515611fb857fe5b9060200190602002015185600281101515611fcf57fe5b6020020151613918565b61353a565b86604001516134ff565b8560e0015183815181101515611ffa57fe5b906020019060200201518260028110151561201157fe5b602002018190525061209461208a8661010001518481518110151561203257fe5b906020019060200201518360028110151561204957fe5b60200201516120858961012001518681518110151561206457fe5b906020019060200201518560028110151561207b57fe5b6020020151613918565b61353a565b86604001516134ff565b856101000151838151811015156120a757fe5b90602001906020020151826002811015156120be57fe5b60200201819052508080600101915050611eaf565b508080600101915050611e91565b506121498360c0015160006002811015156120f857fe5b6020020151600160028110151561210b57fe5b60200201518460c00151600060028110151561212357fe5b6020020151600060028110151561213657fe5b602002015161340690919063ffffffff16565b8360c00151600060028110151561215c57fe5b6020020151600060028110151561216f57fe5b6020020181815250506121df8360c00151600160028110151561218e57fe5b602002015160016002811015156121a157fe5b60200201518460c0015160016002811015156121b957fe5b602002015160006002811015156121cc57fe5b602002015161340690919063ffffffff16565b8360c0015160016002811015156121f257fe5b6020020151600060028110151561220557fe5b60200201818152505060008090505b876000015181101561236e57612280846080015161227b8b600001518481518110151561223d57fe5b9060200190602002015187602001518581518110151561225957fe5b90602001906020020151600060028110151561227157fe5b60200201516134ff565b61353a565b84608001819052506122e88460a001516122e38b60200151848151811015156122a557fe5b906020019060200201518760200151858151811015156122c157fe5b9060200190602002015160006002811015156122d957fe5b60200201516134ff565b61353a565b8460a001819052506123588461012001516123538b608001518481518110151561230e57fe5b906020019060200201518760c0015160028681151561232957fe5b0660028110151561233657fe5b6020020151600060028110151561234957fe5b60200201516134ff565b61353a565b8461012001819052508080600101915050612214565b5061239661238c84608001516123878760e00151613918565b61353a565b84604001516134ff565b83608001819052506123c66123bc8460a001516123b7876101000151613918565b61353a565b84604001516134ff565b8360a001819052506123fd8361012001516123f86123ed87610160015187600001516134ff565b87610140015161353a565b613580565b151561243e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016124359061524f565b60405180910390fd5b61248e61248461247260026040805190810160405290816000820154815260200160018201548152505086600001516134ff565b61247f8760c00151613918565b61353a565b84604001516134ff565b83610140018190525061249f61435d565b87610100015190506124af6145ec565b6124bc82600001516135de565b816000018181525050600160028a600001518115156124d757fe5b040360405190808252806020026020018201604052801561251257816020015b6124ff61448a565b8152602001906001900390816124f75790505b5081602001819052506000600190505b60028a6000015181151561253257fe5b048110156126b3576125bb61257a8761010001518381518110151561255357fe5b90602001906020020151600060028110151561256b57fe5b602002015185604001516134ff565b6125b68860e001518481518110151561258f57fe5b9060200190602002015160006002811015156125a757fe5b602002015185600001516134ff565b61353a565b8260200151600183038151811015156125d057fe5b9060200190602002015160006002811015156125e857fe5b60200201819052506126716126308761010001518381518110151561260957fe5b90602001906020020151600160028110151561262157fe5b602002015185604001516134ff565b61266c8860e001518481518110151561264557fe5b90602001906020020151600160028110151561265d57fe5b602002015185600001516134ff565b61353a565b82602001516001830381518110151561268657fe5b90602001906020020151600160028110151561269e57fe5b60200201819052508080600101915050612522565b506126e16126ca86610140015184604001516134ff565b6126dc876060015184600001516134ff565b61353a565b81606001819052506127426126ff86610140015184602001516134ff565b61273d876101000151600081518110151561271657fe5b90602001906020020151600060028110151561272e57fe5b602002015184600001516134ff565b61353a565b816040018190525061278d6040805190810160405280600681526020017f5a657468657200000000000000000000000000000000000000000000000000008152508b60a001516132ab565b81608001819052506127c16127aa826080015184602001516134ff565b6127bc8c60c0015184600001516134ff565b61353a565b8160a001819052506128bd61284361283987610100015160008151811015156127e657fe5b9060200190602002015160006002811015156127fe57fe5b6020020151886101000151600081518110151561281757fe5b90602001906020020151600160028110151561282f57fe5b602002015161353a565b84604001516134ff565b6128b86128ae8860e00151600081518110151561285c57fe5b90602001906020020151600060028110151561287457fe5b60200201518960e00151600081518110151561288c57fe5b9060200190602002015160016002811015156128a457fe5b602002015161353a565b84600001516134ff565b61353a565b8160c001819052506129b861295861292b6128f688606001516128f18c60600151886020015161340690919063ffffffff16565b6134ff565b6129268960a0015161292161291c8e608001518a6020015161340690919063ffffffff16565b6135de565b6134ff565b61353a565b612953886080015161294e8c60800151886000015161340690919063ffffffff16565b6134ff565b61353a565b6129b38760e00151600081518110151561296e57fe5b90602001906020020151600060028110151561298657fe5b60200201516129ae6129a98c60600151886000015161340690919063ffffffff16565b6135de565b6134ff565b61353a565b8160e00181905250612a81612a54612a0b600260408051908101604052908160008201548152602001600182015481525050612a0686600001518c610120015161340690919063ffffffff16565b6134ff565b612a4f600460408051908101604052908160008201548152602001600182015481525050612a4a87600001518f6080015161340690919063ffffffff16565b6134ff565b61353a565b612a7c612a778460e00151612a728c610100015188600001516134ff565b61353a565b613918565b61353a565b8161010001819052506000612ae886600001518360200151846040015185606001518660a001518760c00151886101000151604051602001612ac99796959493929190615394565b6040516020818303038152906040528051906020012060019004613334565b90508961010001516000015181141515612b37576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612b2e906151ef565b60405180910390fd5b612b3f614663565b612b8884600001518c60c001518d608001518e60a00151604051602001612b6994939291906154ea565b6040516020818303038152906040528051906020012060019004613334565b816080018181525050612bbf60026040805190810160405290816000820154815260200160018201548152505082608001516134ff565b8160000181905250612c406001805480602002602001604051908101604052809291908181526020016000905b82821015612c3257838290600052602060002090600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190612bec565b505050508a60200151613991565b8160200181905250612c67612c5d8a602001518b60400151613a0d565b8a60a00151613a74565b8160400181905250612d20612c928c60200151612c8d8e604001518d61014001516134ff565b61353a565b612d1b612d096000805480602002602001604051908101604052809291908181526020016000905b82821015612d0057838290600052602060002090600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190612cba565b50505050613aed565b612d168d604001516135de565b6134ff565b61353a565b8160600181905250612d85612d61612d5c6004604080519081016040529081600082015481526020016001820154815250508e60a001516134ff565b613918565b612d808360600151612d7b85602001518660400151613b3a565b61353a565b61353a565b8160600181905250612dac8160600151612da783600001518e60c001516134ff565b61353a565b8160600181905250612dbc61437f565b8b6101200151905060008090505b6006811015612f0957612e3a8360800151836000015183600681101515612ded57fe5b6020020151846020015184600681101515612e0457fe5b6020020151604051602001612e1b939291906154b3565b6040516020818303038152906040528051906020012060019004613334565b83608001818152505082608001518360a0015182600681101515612e5a57fe5b6020020181815250506000612e7284608001516135a8565b9050612ef3612eae846000015184600681101515612e8c57fe5b6020020151612ea960028860800151613b9e90919063ffffffff16565b6134ff565b612eee612ee4866020015186600681101515612ec657fe5b6020020151612edf600287613b9e90919063ffffffff16565b6134ff565b876060015161353a565b61353a565b8460600181905250508080600101915050612dca565b5060018260c001516000604081101515612f1f57fe5b60200201818152505060008090505b6006811015612fa057612f778360a0015182600681101515612f4c57fe5b60200201518460c001516000604081101515612f6457fe5b602002015161340690919063ffffffff16565b8360c001516000604081101515612f8a57fe5b6020020181815250508080600101915050612f2e565b50612fa96146c6565b612fc98360c001516000604081101515612fbf57fe5b60200201516135a8565b8360c001516000604081101515612fdc57fe5b60200201818152505060008090505b60026040811515612ff857fe5b0481101561310b5760008090505b6040828260019060020a020110156130ff5760008160019060020a0283019050838160408110151561303457fe5b602002015115156130f357600061308c8760a001518460016006030360068110151561305c57fe5b60200201518860a001518560016006030360068110151561307957fe5b602002015161340690919063ffffffff16565b90506130b7818860c00151866040811015156130a457fe5b602002015161340690919063ffffffff16565b8760c00151836040811015156130c957fe5b602002018181525050600185836040811015156130e257fe5b602002019015159081151581525050505b50806001019050613006565b50806001019050612feb565b506131146145d2565b61311c6145d2565b60008090505b60408110156131e55761318f8361318a60008481548110151561314157fe5b9060005260206000209060020201604080519081016040529081600082015481526020016001820154815250508960c001518560408110151561318057fe5b60200201516134ff565b61353a565b92506131d6826131d18860200151846040811015156131aa57fe5b60200201518960c00151856001604003036040811015156131c757fe5b60200201516134ff565b61353a565b91508080600101915050613122565b506131ee6145d2565b6132426132156132028588604001516134ff565b6132108589606001516134ff565b61353a565b61323d886000015161323889606001518a6040015161340690919063ffffffff16565b6134ff565b61353a565b9050613252866060015182613580565b1515613293576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161328a9061528f565b60405180910390fd5b60019e50505050505050505050505050505092915050565b6132b36145d2565b6133137f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4784846040516020016132ea92919061518c565b604051602081830303815290604052805190602001206001900481151561330d57fe5b06613c0b565b905092915050565b6000604051826020850101518152805191505092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018281151561336157fe5b069050919050565b6133716146ea565b600181600060408110151561338257fe5b6020020181815250508181600160408110151561339b57fe5b6020020181815250506000600290505b6040811015613400576133dc8383600184036040811015156133c957fe5b602002015161340690919063ffffffff16565b82826040811015156133ea57fe5b60200201818152505080806001019150506133ab565b50919050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000180151561343257fe5b828409905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000180151561346957fe5b828408905092915050565b6000818310156134a85782827f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000103016134ac565b8183035b905092915050565b600080600090505b60408110156134f9576134ea83826040811015156134d657fe5b60200201518361343d90919063ffffffff16565b915080806001019150506134bc565b50919050565b6135076145d2565b604051835181526020840151602082015282604082015260408260608360075afa151561353357600080fd5b5092915050565b6135426145d2565b6040518351815260208401516020820152825160408201526020830151606082015260408260808360065afa151561357957600080fd5b5092915050565b6000816000015183600001511480156135a0575081602001518360200151145b905092915050565b60006135d78260027f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000103613b9e565b9050919050565b6000817f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001039050919050565b606060008351905060028181151561361e57fe5b0460405190808252806020026020018201604052801561365857816020015b61364561448a565b81526020019060019003908161363d5790505b5091506000600190505b60028281151561366e57fe5b0481101561370f5761367e6145d2565b848281518110151561368c57fe5b90602001906020020151905084838385038115156136a657fe5b068151811015156136b357fe5b9060200190602002015185838151811015156136cb57fe5b906020019060200201819052508085848486038115156136e757fe5b068151811015156136f457fe5b90602001906020020181905250508080600101915050613662565b50606061371d846000613cab565b90506060826040519080825280602002602001820160405280156137505781602001602082028038833980820191505090505b50905060008090505b600281101561390b5760008090505b848110156137c357878181518110151561377e57fe5b906020019060200201518260028110151561379557fe5b602002015183828151811015156137a857fe5b90602001906020020181815250508080600101915050613768565b5060606137cf83613ec7565b905060608560405190808252806020026020018201604052801561380d57816020015b6137fa6142cb565b8152602001906001900390816137f25790505b50905060008090505b8681101561387e57613856868281518110151561382f57fe5b90602001906020020151848381518110151561384757fe5b906020019060200201516134ff565b828281518110151561386457fe5b906020019060200201819052508080600101915050613816565b5061388a816001613cab565b905060008090505b60028781151561389e57fe5b048110156138fb5781600282028151811015156138b757fe5b9060200190602002015188828151811015156138cf57fe5b90602001906020020151856002811015156138e657fe5b60200201819052508080600101915050613892565b5050508080600101915050613759565b5083935050505092915050565b6139206145d2565b6040805190810160405280836000015181526020017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47846020015181151561396457fe5b067f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47038152509050919050565b61399961470e565b60008090505b6040811015613a06576139e384828151811015156139b957fe5b906020019060200201516139de85846040811015156139d457fe5b60200201516135a8565b6134ff565b82826040811015156139f157fe5b6020020181905250808060010191505061399f565b5092915050565b613a156146ea565b60008090505b6040811015613a6d57613a49838583604081101515613a3657fe5b602002015161340690919063ffffffff16565b8282604081101515613a5757fe5b6020020181815250508080600101915050613a1b565b5092915050565b613a7c6146ea565b60008090505b6040811015613ae657613ac28382604081101515613a9c57fe5b60200201518583604081101515613aaf57fe5b602002015161343d90919063ffffffff16565b8282604081101515613ad057fe5b6020020181815250508080600101915050613a82565b5092915050565b613af56145d2565b60008090505b6040811015613b3457613b25828483815181101515613b1657fe5b9060200190602002015161353a565b91508080600101915050613afb565b50919050565b613b426145d2565b60008090505b6040811015613b9757613b8882613b838684604081101515613b6657fe5b60200201518685604081101515613b7957fe5b60200201516134ff565b61353a565b91508080600101915050613b48565b5092915050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa1515613bff57600080fd5b80519250505092915050565b613c136145d2565b60005b600115613c8e5760006003613c2c8560036140b7565b019050613c6881600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4701811515613c6257fe5b046140b7565b915080613c768360026140b7565b1415613c825750613c8e565b60018401935050613c16565b604080519081016040528084815260200182815250915050919050565b60606000835190506001811415613cc55783915050613ec1565b6000600282811515613cd357fe5b06141515613d16576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613d0d906151cf565b60405180910390fd5b6000613d5a826310000000811515613d2a57fe5b047f14a3074b02521e3b1ed9852e5028452693e87be4e910500c7ba9bbddb2f46edd613b9e90919063ffffffff16565b90506000600190508415613d7857613d71826135a8565b9150600290505b613d81816135a8565b90506060613d99613d93886000614124565b87613cab565b90506060613db1613dab896001614124565b88613cab565b905060006001905085604051908082528060200260200182016040528015613df357816020015b613de06142cb565b815260200190600190039081613dd85790505b50965060008090505b86811015613eb957613e7c613e768560028a811515613e1757fe5b0484811515613e2257fe5b06815181101515613e2f57fe5b90602001906020020151613e718660028c811515613e4957fe5b0486811515613e5457fe5b06815181101515613e6157fe5b90602001906020020151866134ff565b61353a565b866134ff565b8882815181101515613e8a57fe5b90602001906020020181905250613eaa868361340690919063ffffffff16565b91508080600101915050613dfc565b505050505050505b92915050565b60606000825190506001811415613ee157829150506140b2565b6000600282811515613eef57fe5b06141515613f32576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613f29906151cf565b60405180910390fd5b6000613f76826310000000811515613f4657fe5b047f14a3074b02521e3b1ed9852e5028452693e87be4e910500c7ba9bbddb2f46edd613b9e90919063ffffffff16565b90506060613f8d613f888660006141d7565b613ec7565b90506060613fa4613f9f8760016141d7565b613ec7565b905060006001905084604051908082528060200260200182016040528015613fdb5781602001602082028038833980820191505090505b50955060008090505b858110156140ab5761406d614030838560028a81151561400057fe5b048581151561400b57fe5b0681518110151561401857fe5b9060200190602002015161340690919063ffffffff16565b8560028981151561403d57fe5b048481151561404857fe5b0681518110151561405557fe5b9060200190602002015161343d90919063ffffffff16565b878281518110151561407b57fe5b906020019060200201818152505061409c858361340690919063ffffffff16565b91508080600101915050613fe4565b5050505050505b919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa151561411857600080fd5b80519250505092915050565b60606002835181151561413357fe5b0460405190808252806020026020018201604052801561416d57816020015b61415a6142cb565b8152602001906001900390816141525790505b50905060008090505b6002845181151561418357fe5b048110156141d0578383826002020181518110151561419e57fe5b9060200190602002015182828151811015156141b657fe5b906020019060200201819052508080600101915050614176565b5092915050565b6060600283518115156141e657fe5b046040519080825280602002602001820160405280156142155781602001602082028038833980820191505090505b50905060008090505b6002845181151561422b57fe5b04811015614279578383826002020181518110151561424657fe5b90602001906020020151828281518110151561425e57fe5b9060200190602002018181525050808060010191505061421e565b5092915050565b610120604051908101604052806060815260200160608152602001606081526020016142aa6142cb565b815260200160608152602001600081526020016142c56142cb565b81525090565b604080519081016040528060008152602001600081525090565b61084060405190810160405280600081526020016143016142cb565b815260200161430e6142cb565b815260200161431b61448a565b815260200160008152602001600081526020016000815260200161433d61473d565b815260200161434a6147f0565b8152602001614357614812565b81525090565b6060604051908101604052806000815260200160008152602001600081525090565b61034060405190810160405280614394614848565b81526020016143a1614848565b815260200160008152602001600081525090565b610320604051908101604052806143ca6142cb565b81526020016143d76142cb565b81526020016143e46142cb565b81526020016143f16142cb565b8152602001606081526020016144056142cb565b81526020016144126142cb565b815260200161441f6142cb565b815260200161442c6142cb565b8152602001606081526020016144406142cb565b815260200161444d6142cb565b81526020016060815260200160008152602001600081525090565b6040805190810160405280600290602082028038833980820191505090505090565b6080604051908101604052806002905b6144a26142cb565b81526020019060019003908161449a5790505090565b61114060405190810160405280600081526020016144d4614877565b81526020016000815260200160008152602001600081526020016144f6614877565b815260200160008152602001600081526020016145116142cb565b815260200160008152602001600081525090565b6102606040519081016040528060008152602001606081526020016000815260200161454f6142cb565b815260200161455c6142cb565b81526020016145696142cb565b815260200161457661489b565b815260200160608152602001606081526020016145916142cb565b815260200161459e6142cb565b81525090565b6080604051908101604052806002905b6145bc6142cb565b8152602001906001900390816145b45790505090565b604080519081016040528060008152602001600081525090565b61020060405190810160405280600081526020016060815260200161460f6142cb565b815260200161461c6142cb565b81526020016146296142cb565b81526020016146366142cb565b81526020016146436142cb565b81526020016146506142cb565b815260200161465d6142cb565b81525090565b612160604051908101604052806146786142cb565b81526020016146856148c9565b8152602001614692614877565b815260200161469f6142cb565b8152602001600081526020016146b36148f8565b81526020016146c0614877565b81525090565b61080060405190810160405280604090602082028038833980820191505090505090565b61080060405190810160405280604090602082028038833980820191505090505090565b611000604051908101604052806040905b6147276142cb565b81526020019060019003908161471f5790505090565b610320604051908101604052806147526142cb565b815260200161475f6142cb565b815260200161476c6142cb565b81526020016147796142cb565b81526020016060815260200161478d6142cb565b815260200161479a6142cb565b81526020016147a76142cb565b81526020016147b46142cb565b8152602001606081526020016147c86142cb565b81526020016147d56142cb565b81526020016060815260200160008152602001600081525090565b6060604051908101604052806000815260200160008152602001600081525090565b61034060405190810160405280614827614848565b8152602001614834614848565b815260200160008152602001600081525090565b610180604051908101604052806006905b6148616142cb565b8152602001906001900390816148595790505090565b61080060405190810160405280604090602082028038833980820191505090505090565b6080604051908101604052806002905b6148b3614468565b8152602001906001900390816148ab5790505090565b611000604051908101604052806040905b6148e26142cb565b8152602001906001900390816148da5790505090565b60c060405190810160405280600690602082028038833980820191505090505090565b600082601f830112151561492e57600080fd5b813561494161493c8261555c565b61552f565b9150818183526020840193506020810190508385604084028201111561496657600080fd5b60005b83811015614996578161497c88826149a0565b845260208401935060408301925050600181019050614969565b5050505092915050565b600082601f83011215156149b357600080fd5b60026149c66149c182615584565b61552f565b915081838560208402820111156149dc57600080fd5b60005b83811015614a0c57816149f28882614a8c565b8452602084019350602083019250506001810190506149df565b5050505092915050565b600082601f8301121515614a2957600080fd5b6002614a3c614a37826155a6565b61552f565b91508183856020840282011115614a5257600080fd5b60005b83811015614a825781614a688882614a8c565b845260208401935060208301925050600181019050614a55565b5050505092915050565b6000614a9882356156f7565b905092915050565b600082601f8301121515614ab357600080fd5b8135614ac6614ac1826155c8565b61552f565b91508082526020830160208301858383011115614ae257600080fd5b614aed83828461570b565b50505092915050565b6000614b028235615701565b905092915050565b600080600080600080600080610140898b031215614b2757600080fd5b600089013567ffffffffffffffff811115614b4157600080fd5b614b4d8b828c0161491b565b985050602089013567ffffffffffffffff811115614b6a57600080fd5b614b768b828c0161491b565b975050604089013567ffffffffffffffff811115614b9357600080fd5b614b9f8b828c0161491b565b9650506060614bb08b828c01614a16565b95505060a089013567ffffffffffffffff811115614bcd57600080fd5b614bd98b828c0161491b565b94505060c0614bea8b828c01614af6565b93505060e0614bfb8b828c01614a16565b92505061012089013567ffffffffffffffff811115614c1957600080fd5b614c258b828c01614aa0565b9150509295985092959890939650565b600060208284031215614c4757600080fd5b6000614c5584828501614af6565b91505092915050565b6000614c6a8383614d3b565b60808301905092915050565b6000614c8283836150f9565b60408301905092915050565b6000614c9982615622565b614ca3818561568d565b9350614cae836155f4565b60005b82811015614cdc57614cc4868351614c5e565b9550614ccf82615659565b9150600181019050614cb1565b50849250505092915050565b614cf181615638565b614cfb81846156a9565b9250614d068261560b565b60005b82811015614d3457614d1c858351614c76565b9450614d2782615673565b9150600181019050614d09565b5050505050565b614d448161562d565b614d4e818461569e565b9250614d5982615601565b60005b82811015614d8757614d6f858351614c76565b9450614d7a82615666565b9150600181019050614d5c565b5050505050565b614d978161562d565b614da181846156a9565b9250614dac82615601565b60005b82811015614dda57614dc2858351614c76565b9450614dcd82615666565b9150600181019050614daf565b5050505050565b6000614dec82615643565b614df681856156b4565b9350614e0183615615565b60005b82811015614e2f57614e17868351614c76565b9550614e2282615680565b9150600181019050614e04565b50849250505092915050565b614e44816156e1565b82525050565b6000614e558261564e565b614e5f81856156d6565b9350614e6f81856020860161571a565b80840191505092915050565b6000614e88601f836156c5565b91507f496e7075742073697a65206973206e6f74206120706f776572206f66203221006000830152602082019050919050565b6000614ec8602a836156c5565b91507f5369676d612070726f746f636f6c206368616c6c656e676520657175616c697460008301527f79206661696c7572652e000000000000000000000000000000000000000000006020830152604082019050919050565b6000614f2e6042836156c5565b91507f496e61646571756174652073746f72656420766563746f72206261736521204360008301527f616c6c20657874656e644261736520616e64207468656e20747279206167616960208301527f6e2e0000000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000614fba601d836156c5565b91507f5265636f76657279206661696c75726520666f7220425e78202a20412e0000006000830152602082019050919050565b6000614ffa6021836156c5565b91507f496e646578206f70706f736974652070617269747920636865636b206661696c60008301527f2e000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000615060601d836156c5565b91507f5265636f76657279206661696c75726520666f7220435e78202a20442e0000006000830152602082019050919050565b60006150a06025836156c5565b91507f496e6e65722070726f6475637420657175616c69747920636865636b2066616960008301527f6c7572652e0000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60408201600082015161510f6000850182615157565b5060208201516151226020850182615157565b50505050565b60408201600082015161513e6000850182615157565b5060208201516151516020850182615157565b50505050565b615160816156ed565b82525050565b61516f816156ed565b82525050565b615186615181826156ed565b61574d565b82525050565b60006151988285614e4a565b91506151a48284615175565b6020820191508190509392505050565b60006020820190506151c96000830184614e3b565b92915050565b600060208201905081810360008301526151e881614e7b565b9050919050565b6000602082019050818103600083015261520881614ebb565b9050919050565b6000602082019050818103600083015261522881614f21565b9050919050565b6000602082019050818103600083015261524881614fad565b9050919050565b6000602082019050818103600083015261526881614fed565b9050919050565b6000602082019050818103600083015261528881615053565b9050919050565b600060208201905081810360008301526152a881615093565b9050919050565b60006020820190506152c46000830184615166565b92915050565b60006102e0820190506152e0600083018f615166565b81810360208301526152f2818e614c8e565b90508181036040830152615306818d614c8e565b9050615315606083018c615128565b61532260a083018b615128565b61532f60e083018a615128565b61533d610120830189615128565b61534b610160830188615128565b6153596101a0830187615128565b6153676101e0830186615128565b615375610220830185615128565b615383610260830184614ce8565b9d9c50505050505050505050505050565b6000610180820190506153aa600083018a615166565b81810360208301526153bc8189614c8e565b90506153cb6040830188615128565b6153d86080830187615128565b6153e560c0830186615128565b6153f3610100830185615128565b615401610140830184615128565b98975050505050505050565b600060a0820190506154226000830185615166565b61542f6020830184614d8e565b9392505050565b600060e08201905061544b6000830189615166565b6154586020830188615128565b818103606083015261546a8187614de1565b9050818103608083015261547e8186614de1565b905081810360a08301526154928185614de1565b905081810360c08301526154a68184614de1565b9050979650505050505050565b600060a0820190506154c86000830186615166565b6154d56020830185615128565b6154e26060830184615128565b949350505050565b60006080820190506154ff6000830187615166565b61550c6020830186615166565b6155196040830185615166565b6155266060830184615166565b95945050505050565b6000604051905081810181811067ffffffffffffffff8211171561555257600080fd5b8060405250919050565b600067ffffffffffffffff82111561557357600080fd5b602082029050602081019050919050565b600067ffffffffffffffff82111561559b57600080fd5b602082029050919050565b600067ffffffffffffffff8211156155bd57600080fd5b602082029050919050565b600067ffffffffffffffff8211156155df57600080fd5b601f19601f8301169050602081019050919050565b6000602082019050919050565b6000819050919050565b6000819050919050565b6000602082019050919050565b600081519050919050565b600060029050919050565b600060029050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b600082825260208201905092915050565b600081905092915050565b600081905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60008115159050919050565b6000819050919050565b6000819050919050565b6000819050919050565b82818337600083830152505050565b60005b8381101561573857808201518184015260208101905061571d565b83811115615747576000848401525b50505050565b600081905091905056fea265627a7a7230582074af258b6bb1ef5e8504f2b37ee0a7a6cf99280eeb54a0aec9d19b9d149634956c6578706572696d656e74616cf50037',
            gas: '470000000'
        }, function(e, contract) {
            if (typeof contract.address !== 'undefined') {
                _zether = contract.address;
                if (_zether && _burn) {
                    initZSC();
                }
            }
        });
        var burnverifier = burnverifierContract.new({
            from: web3.eth.accounts[0],
            data: '0x60806040526200001f60026200022b640100000000026401000000009004565b60849060206200003192919062000569565b503480156200003f57600080fd5b506200008f6040805190810160405280600181526020017f4700000000000000000000000000000000000000000000000000000000000000815250620002e0640100000000026401000000009004565b60806000820151816000015560208201518160010155905050620000f76040805190810160405280600181526020017f5600000000000000000000000000000000000000000000000000000000000000815250620002e0640100000000026401000000009004565b6082600082015181600001556020820151816001015590505060008090505b60208110156200022457620001706040805190810160405280600181526020017f47000000000000000000000000000000000000000000000000000000000000008152508262000363640100000000026401000000009004565b6000826020811015156200018057fe5b600202016000820151816000015560208201518160010155905050620001eb6040805190810160405280600181526020017f48000000000000000000000000000000000000000000000000000000000000008152508262000363640100000000026401000000009004565b604082602081101515620001fb57fe5b600202016000820151816000015560208201518160010155905050808060010191505062000116565b506200070b565b62000235620005ae565b60018160006020811015156200024757fe5b602002018181525050818160016020811015156200026157fe5b6020020181815250506000600290505b6020811015620002da57620002b48383600184036020811015156200029257fe5b6020020151620003e964010000000002620011bd179091906401000000009004565b8282602081101515620002c357fe5b602002018181525050808060010191505062000271565b50919050565b620002ea620005d2565b6200035c7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478360405160200162000322919062000666565b60405160208183030381529060405280519060200120600190048115156200034657fe5b0662000421640100000000026401000000009004565b9050919050565b6200036d620005d2565b620003e17f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478484604051602001620003a79291906200067f565b6040516020818303038152906040528051906020012060019004811515620003cb57fe5b0662000421640100000000026401000000009004565b905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156200041657fe5b828409905092915050565b6200042b620005d2565b60005b600115620004de576000600362000456856003620004fb640100000000026401000000009004565b019050620004a481600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47018115156200048e57fe5b04620004fb640100000000026401000000009004565b915080620004c3836002620004fb640100000000026401000000009004565b1415620004d15750620004de565b600184019350506200042e565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa15156200055d57600080fd5b80519250505092915050565b82602081019282156200059b579160200282015b828111156200059a5782518255916020019190600101906200057d565b5b509050620005aa9190620005ec565b5090565b61040060405190810160405280602090602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6200061191905b808211156200060d576000816000905550600101620005f3565b5090565b90565b60006200062182620006ab565b6200062d8185620006b6565b93506200063f818560208601620006cb565b80840191505092915050565b620006606200065a82620006c1565b62000701565b82525050565b600062000674828462000614565b915081905092915050565b60006200068d828562000614565b91506200069b82846200064b565b6020820191508190509392505050565b600081519050919050565b600081905092915050565b6000819050919050565b60005b83811015620006eb578082015181840152602081019050620006ce565b83811115620006fb576000848401525b50505050565b6000819050919050565b612410806200071b6000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c01000000000000000000000000000000000000000000000000000000009004806382d23b8a14610058578063d79e841314610088575b600080fd5b610072600480360361006d9190810190611e25565b6100b8565b60405161007f919061211d565b60405180910390f35b6100a2600480360361009d9190810190611d6c565b6100fe565b6040516100af91906120c2565b60405180910390f35b6100c06118cd565b6040518351815260208401516020820152825160408201526020830151606082015260408260808360065afa15156100f757600080fd5b5092915050565b60006101086118e7565b60408051908101604052808a600060028110151561012257fe5b60200201516001900481526020018a600160028110151561013f57fe5b6020020151600190048152508160000181905250604080519081016040528089600060028110151561016d57fe5b602002015160019004815260200189600160028110151561018a57fe5b602002015160019004815250816020018190525060408051908101604052808860006002811015156101b857fe5b60200201516001900481526020018860016002811015156101d557fe5b60200201516001900481525081604001819052508581606001818152505084816080018181525050604080519081016040528085600060028110151561021757fe5b602002015160019004815260200185600160028110151561023457fe5b6020020151600190048152508160a00181905250610250611937565b61025984610274565b905061026582826104d7565b92505050979650505050505050565b61027c611937565b60408051908101604052806102928460006110d2565b81526020016102a28460206110d2565b815250816000018190525060408051908101604052806102c38460406110d2565b81526020016102d38460606110d2565b8152508160200181905250604080519081016040528060408051908101604052806102ff8660806110d2565b815260200161030f8660a06110d2565b8152508152602001604080519081016040528061032d8660c06110d2565b815260200161033d8660e06110d2565b8152508152508160400181905250610357826101006110d2565b8160a001818152505061036c826101206110d2565b816060018181525050610381826101406110d2565b81608001818152505061039261199b565b61039e836101606110d2565b8160000181815250506103b3836101806110d2565b816020018181525050808260c001819052506103cd6119b5565b60008090505b600581101561048d5760408051908101604052806103f887604085026101a0016110d2565b815260200161040e87604085026101c0016110d2565b81525082600001518260058110151561042357fe5b6020020181905250604080519081016040528061044a87604085600501026101a0016110d2565b815260200161046387604085600501026101c0016110d2565b81525082602001518260058110151561047857fe5b602002018190525080806001019150506103d3565b506104a08460806005026101a0016110d2565b8160400181815250506104bb8460806005026101c0016110d2565b816060018181525050808360e001819052508292505050919050565b60006104e16119eb565b61056e610533856060015186608001518760400151886000015189602001516040516020016105149594939291906121f8565b60405160208183030381529060405280519060200120600190046110eb565b8460000151856020015160405160200161054f9392919061217c565b60405160208183030381529060405280519060200120600190046110eb565b8160000181815250506105848160000151611120565b81602001819052506105c381600001516040516020016105a49190612138565b60405160208183030381529060405280519060200120600190046110eb565b8160400181815250506105e7816040015182604001516111bd90919063ffffffff16565b81606001818152505061060b816040015182606001516111bd90919063ffffffff16565b81608001818152505061065f6084602080602002604051908101604052809291908260208015610650576020028201915b81548152602001906001019080831161063c575b505050505082606001516111f4565b8160a001819052506106a481604001518460400151604051602001610685929190612153565b60405160208183030381529060405280519060200120600190046110eb565b816101200181815250506107296106e282608001516106d4602060020a85608001516111bd90919063ffffffff16565b61125b90919063ffffffff16565b61071b6107008460600151856040015161125b90919063ffffffff16565b61070d856020015161129b565b6111bd90919063ffffffff16565b61125b90919063ffffffff16565b8160c001818152505061079d61075b8460400151600060028110151561074b57fe5b60200201518361012001516112e6565b6107988560400151600160028110151561077157fe5b60200201516107938561012001518661012001516111bd90919063ffffffff16565b6112e6565b6100b8565b8160e001819052506107c08160c001518460a0015161125b90919063ffffffff16565b816101000181815250506107d2611a51565b6107e38460c0015160000151611321565b8160000181815250506108386108216080604080519081016040529081600082015481526020016001820154815250508660c00151602001516112e6565b610833876040015184600001516112e6565b6100b8565b81602001819052506108836040805190810160405280600681526020017f5a65746865720000000000000000000000000000000000000000000000000000815250866080015161134d565b81604001819052506108bb6108a482604001518660c00151602001516112e6565b6108b68760a0015184600001516112e6565b6100b8565b816060018190525061092b6108f286600001516108ed85606001518860c00151600001516111bd90919063ffffffff16565b6112e6565b610926876020015161092161091c87606001518a60c00151602001516111bd90919063ffffffff16565b611321565b6112e6565b6100b8565b81608001819052506109ff6109cf61098260806040805190810160405290816000820154815260200160018201548152505061097d8860c00151600001518761010001516111bd90919063ffffffff16565b6112e6565b6109ca6082604080519081016040529081600082015481526020016001820154815250506109c58960c00151600001518a606001516111bd90919063ffffffff16565b6112e6565b6100b8565b6109fa6109f584608001516109f08760e001518a60c00151600001516112e6565b6100b8565b6113bd565b6100b8565b8160a001819052506000610a53836101200151836020015184606001518560a00151604051602001610a3494939291906121b3565b60405160208183030381529060405280519060200120600190046110eb565b90508460c001516000015181141515610aa1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a98906120dd565b60405180910390fd5b6000610af08660c00151600001518760a0015188606001518960800151604051602001610ad1949392919061224c565b60405160208183030381529060405280519060200120600190046110eb565b9050610afa6118cd565b610b24608060408051908101604052908160008201548152602001600182015481525050836112e6565b9050610b2e611aa7565b610b946040602080602002604051908101604052809291906000905b82821015610b86578382600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190610b4a565b505050508760200151611436565b9050610b9e611ad6565b610bbd610bb3886020015189604001516111f4565b8860a001516114ad565b9050610bc76118cd565b610c65610bea8b60000151610be58d602001518c61012001516112e6565b6100b8565b610c60610c4e6000602080602002604051908101604052809291906000905b82821015610c45578382600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190610c09565b50505050611526565b610c5b8c60400151611321565b6112e6565b6100b8565b9050610cb8610ca0610c9b6082604080519081016040529081600082015481526020016001820154815250508d608001516112e6565b6113bd565b610cb383610cae878761156e565b6100b8565b6100b8565b9050610cd181610ccc868d60a001516112e6565b6100b8565b9050610cdb6119b5565b8a60e001519050610cea611afa565b60008090505b6005811015610e0a57610d5c88846000015183600581101515610d0f57fe5b6020020151856020015184600581101515610d2657fe5b6020020151604051602001610d3d9392919061217c565b60405160208183030381529060405280519060200120600190046110eb565b9750878282600581101515610d6d57fe5b6020020181815250506000610d81896115d2565b9050610dfa610df4610dbc866000015185600581101515610d9e57fe5b6020020151610db760028e61160890919063ffffffff16565b6112e6565b610def876020015186600581101515610dd157fe5b6020020151610dea60028761160890919063ffffffff16565b6112e6565b6100b8565b866100b8565b9450508080600101915050610cf0565b50610e13611ad6565b6001816000602081101515610e2457fe5b60200201818152505060008090505b6005811015610e9957610e748382600581101515610e4d57fe5b6020020151836000602081101515610e6157fe5b60200201516111bd90919063ffffffff16565b826000602081101515610e8357fe5b6020020181815250508080600101915050610e33565b50610ea2611b1d565b610ebe826000602081101515610eb457fe5b60200201516115d2565b826000602081101515610ecd57fe5b60200201818152505060008090505b60026020811515610ee957fe5b04811015610fec5760008090505b6020828260019060020a02011015610fe05760008160019060020a02830190508381602081101515610f2557fe5b60200201511515610fd4576000610f758784600160050303600581101515610f4957fe5b60200201518885600160050303600581101515610f6257fe5b60200201516111bd90919063ffffffff16565b9050610f9c818786602081101515610f8957fe5b60200201516111bd90919063ffffffff16565b8683602081101515610faa57fe5b60200201818152505060018583602081101515610fc357fe5b602002019015159081151581525050505b50806001019050610ef7565b50806001019050610edc565b50610ff56118cd565b610ffe83611675565b90506110086118cd565b611012848a6116f7565b905061101c6118cd565b61106c611043611030858a604001516112e6565b61103e858b606001516112e6565b6100b8565b6110678d6110628b606001518c604001516111bd90919063ffffffff16565b6112e6565b6100b8565b90506110788882611761565b15156110b9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110b0906120fd565b60405180910390fd5b60019f5050505050505050505050505050505092915050565b6000604051826020850101518152805191505092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018281151561111857fe5b069050919050565b611128611ad6565b600181600060208110151561113957fe5b6020020181815250508181600160208110151561115257fe5b6020020181815250506000600290505b60208110156111b75761119383836001840360208110151561118057fe5b60200201516111bd90919063ffffffff16565b82826020811015156111a157fe5b6020020181815250508080600101915050611162565b50919050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156111e957fe5b828409905092915050565b6111fc611ad6565b60008090505b60208110156112545761123083858360208110151561121d57fe5b60200201516111bd90919063ffffffff16565b828260208110151561123e57fe5b6020020181815250508080600101915050611202565b5092915050565b60008183101561128f5782827f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000010301611293565b8183035b905092915050565b600080600090505b60208110156112e0576112d183826020811015156112bd57fe5b60200201518361178990919063ffffffff16565b915080806001019150506112a3565b50919050565b6112ee6118cd565b604051835181526020840151602082015282604082015260408260608360075afa151561131a57600080fd5b5092915050565b6000817f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001039050919050565b6113556118cd565b6113b57f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47848460405160200161138c92919061209a565b60405160208183030381529060405280519060200120600190048115156113af57fe5b066117c0565b905092915050565b6113c56118cd565b6040805190810160405280836000015181526020017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47846020015181151561140957fe5b067f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47038152509050919050565b61143e611aa7565b60008090505b60208110156114a657611483848260208110151561145e57fe5b602002015161147e858460208110151561147457fe5b60200201516115d2565b6112e6565b828260208110151561149157fe5b60200201819052508080600101915050611444565b5092915050565b6114b5611ad6565b60008090505b602081101561151f576114fb83826020811015156114d557fe5b602002015185836020811015156114e857fe5b602002015161178990919063ffffffff16565b828260208110151561150957fe5b60200201818152505080806001019150506114bb565b5092915050565b61152e6118cd565b60008090505b60208110156115685761155982848360208110151561154f57fe5b60200201516100b8565b91508080600101915050611534565b50919050565b6115766118cd565b60008090505b60208110156115cb576115bc826115b7868460208110151561159a57fe5b602002015186856020811015156115ad57fe5b60200201516112e6565b6100b8565b9150808060010191505061157c565b5092915050565b60006116018260027f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000103611608565b9050919050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa151561166957600080fd5b80519250505092915050565b61167d6118cd565b60008090505b60208110156116f1576116e2826116dd6000846020811015156116a257fe5b600202016040805190810160405290816000820154815260200160018201548152505086856020811015156116d357fe5b60200201516112e6565b6100b8565b91508080600101915050611683565b50919050565b6116ff6118cd565b60008090505b602081101561175a5761174b82611746858460208110151561172357fe5b6020020151878560016020030360208110151561173c57fe5b60200201516112e6565b6100b8565b91508080600101915050611705565b5092915050565b600081600001518360000151148015611781575081602001518360200151145b905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156117b557fe5b828408905092915050565b6117c86118cd565b60005b60011561184357600060036117e1856003611860565b01905061181d81600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd470181151561181757fe5b04611860565b91508061182b836002611860565b14156118375750611843565b600184019350506117cb565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa15156118c157600080fd5b80519250505092915050565b604080519081016040528060008152602001600081525090565b610140604051908101604052806118fc611b41565b8152602001611909611b41565b8152602001611916611b41565b81526020016000815260200160008152602001611931611b41565b81525090565b6104606040519081016040528061194c611b41565b8152602001611959611b41565b8152602001611966611b5b565b8152602001600081526020016000815260200160008152602001611988611b89565b8152602001611995611ba3565b81525090565b604080519081016040528060008152602001600081525090565b6102c0604051908101604052806119ca611bd9565b81526020016119d7611bd9565b815260200160008152602001600081525090565b6109206040519081016040528060008152602001611a07611c08565b8152602001600081526020016000815260200160008152602001611a29611c08565b815260200160008152602001611a3d611b41565b815260200160008152602001600081525090565b6101606040519081016040528060008152602001611a6d611b41565b8152602001611a7a611b41565b8152602001611a87611b41565b8152602001611a94611b41565b8152602001611aa1611b41565b81525090565b610800604051908101604052806020905b611ac0611b41565b815260200190600190039081611ab85790505090565b61040060405190810160405280602090602082028038833980820191505090505090565b60a060405190810160405280600590602082028038833980820191505090505090565b61040060405190810160405280602090602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6080604051908101604052806002905b611b73611b41565b815260200190600190039081611b6b5790505090565b604080519081016040528060008152602001600081525090565b6102c060405190810160405280611bb8611bd9565b8152602001611bc5611bd9565b815260200160008152602001600081525090565b610140604051908101604052806005905b611bf2611b41565b815260200190600190039081611bea5790505090565b61040060405190810160405280602090602082028038833980820191505090505090565b600082601f8301121515611c3f57600080fd5b6002611c52611c4d826122be565b612291565b91508183856020840282011115611c6857600080fd5b60005b83811015611c985781611c7e8882611ca2565b845260208401935060208301925050600181019050611c6b565b5050505092915050565b6000611cae8235612376565b905092915050565b600082601f8301121515611cc957600080fd5b8135611cdc611cd7826122e0565b612291565b91508082526020830160208301858383011115611cf857600080fd5b611d0383828461238a565b50505092915050565b600060408284031215611d1e57600080fd5b611d286040612291565b90506000611d3884828501611d58565b6000830152506020611d4c84828501611d58565b60208301525092915050565b6000611d648235612380565b905092915050565b6000806000806000806000610160888a031215611d8857600080fd5b6000611d968a828b01611c2c565b9750506040611da78a828b01611c2c565b9650506080611db88a828b01611c2c565b95505060c0611dc98a828b01611d58565b94505060e0611dda8a828b01611d58565b935050610100611dec8a828b01611c2c565b92505061014088013567ffffffffffffffff811115611e0a57600080fd5b611e168a828b01611cb6565b91505092959891949750929550565b60008060808385031215611e3857600080fd5b6000611e4685828601611d0c565b9250506040611e5785828601611d0c565b9150509250929050565b6000611e6d8383612007565b60408301905092915050565b611e8281612316565b611e8c8184612339565b9250611e978261230c565b60005b82811015611ec557611ead858351611e61565b9450611eb88261232c565b9150600181019050611e9a565b5050505050565b611ed581612360565b82525050565b6000611ee682612321565b611ef08185612355565b9350611f00818560208601612399565b80840191505092915050565b6000611f19602a83612344565b91507f5369676d612070726f746f636f6c206368616c6c656e676520657175616c697460008301527f79206661696c7572652e000000000000000000000000000000000000000000006020830152604082019050919050565b6000611f7f602583612344565b91507f496e6e65722070726f6475637420657175616c69747920636865636b2066616960008301527f6c7572652e0000000000000000000000000000000000000000000000000000006020830152604082019050919050565b604082016000820151611fee6000850182612065565b5060208201516120016020850182612065565b50505050565b60408201600082015161201d6000850182612065565b5060208201516120306020850182612065565b50505050565b60408201600082015161204c6000850182612065565b50602082015161205f6020850182612065565b50505050565b61206e8161236c565b82525050565b61207d8161236c565b82525050565b61209461208f8261236c565b6123cc565b82525050565b60006120a68285611edb565b91506120b28284612083565b6020820191508190509392505050565b60006020820190506120d76000830184611ecc565b92915050565b600060208201905081810360008301526120f681611f0c565b9050919050565b6000602082019050818103600083015261211681611f72565b9050919050565b60006040820190506121326000830184611fd8565b92915050565b600060208201905061214d6000830184612074565b92915050565b600060a0820190506121686000830185612074565b6121756020830184611e79565b9392505050565b600060a0820190506121916000830186612074565b61219e6020830185612036565b6121ab6060830184612036565b949350505050565b600060e0820190506121c86000830187612074565b6121d56020830186612036565b6121e26060830185612036565b6121ef60a0830184612036565b95945050505050565b60006101008201905061220e6000830188612074565b61221b6020830187612074565b6122286040830186612036565b6122356080830185612036565b61224260c0830184612036565b9695505050505050565b60006080820190506122616000830187612074565b61226e6020830186612074565b61227b6040830185612074565b6122886060830184612074565b95945050505050565b6000604051905081810181811067ffffffffffffffff821117156122b457600080fd5b8060405250919050565b600067ffffffffffffffff8211156122d557600080fd5b602082029050919050565b600067ffffffffffffffff8211156122f757600080fd5b601f19601f8301169050602081019050919050565b6000819050919050565b600060029050919050565b600081519050919050565b6000602082019050919050565b600081905092915050565b600082825260208201905092915050565b600081905092915050565b60008115159050919050565b6000819050919050565b6000819050919050565b6000819050919050565b82818337600083830152505050565b60005b838110156123b757808201518184015260208101905061239c565b838111156123c6576000848401525b50505050565b600081905091905056fea265627a7a72305820ea405bfb42db9d5d4c9827ee48f74bd39ea079e5ac8034d97c2c264ae2b0ef086c6578706572696d656e74616cf50037',
            gas: '470000000'
        }, function(e, contract) {
            if (typeof contract.address !== 'undefined') {
                _burn = contract.address
                if (_zether && _burn) {
                    initZSC();
                }
            }
        });
        var initZSC = function() {
            var _epochLength = 1; // magic number hardcoded. revisit
            zsc = zscContract.new(
                coin,
                _zether,
                _burn,
                _epochLength, {
                    from: web3.eth.accounts[0],
                    data: '0x608060405260006004556000600a5534801561001a57600080fd5b50604051608080612a8f8339810180604052608081101561003a57600080fd5b8101908080519060200190929190805190602001909291908051906020019092919080519060200190929190505050836000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550806003819055505050505061294a806101456000396000f3fe608060405234801561001057600080fd5b50600436106100a5576000357c0100000000000000000000000000000000000000000000000000000000900480635ec7ccfd116100785780635ec7ccfd1461018457806373663b5f1461046157806380a25373146105a8578063b1537596146105fe576100a5565b806337f0d646146100aa5780635464befb146100d857806357d775f8146101105780635b7f82f41461012e575b600080fd5b6100d6600480360360408110156100c057600080fd5b8101908080604001909192919290505050610640565b005b61010e600480360360608110156100ee57600080fd5b81019080806040019091929192908035906020019092919050505061091d565b005b610118610d8f565b6040518082815260200191505060405180910390f35b61016e6004803603606081101561014457600080fd5b81019080803590602001909291908035906020019092919080359060200190929190505050610d95565b6040518082815260200191505060405180910390f35b61045f600480360360e081101561019a57600080fd5b81019080803590602001906401000000008111156101b757600080fd5b8201836020820111156101c957600080fd5b803590602001918460408302840111640100000000831117156101eb57600080fd5b9190808060200260200160405190810160405280939291908181526020016000905b82821015610264578484839050604002016002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050508152602001906001019061020d565b5050505050919291929080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050509192919290803590602001906401000000008111156102c857600080fd5b8201836020820111156102da57600080fd5b803590602001918460408302840111640100000000831117156102fc57600080fd5b9190808060200260200160405190810160405280939291908181526020016000905b82821015610375578484839050604002016002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050508152602001906001019061031e565b5050505050919291929080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050509192919290803590602001906401000000008111156103d957600080fd5b8201836020820111156103eb57600080fd5b8035906020019184600183028401116401000000008311171561040d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610dce565b005b6105a6600480360360c081101561047757600080fd5b8101908080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f82011690508083019250505050505091929192908035906020019092919080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f82011690508083019250505050505091929192908035906020019064010000000081111561052057600080fd5b82018360208201111561053257600080fd5b8035906020019184600183028401116401000000008311171561055457600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611906565b005b6105e8600480360360608110156105be57600080fd5b81019080803590602001909291908035906020019092919080359060200190929190505050612329565b6040518082815260200191505060405180910390f35b61062a6004803603602081101561061457600080fd5b8101908080359060200190929190505050612362565b6040518082815260200191505060405180910390f35b60008160405160200180826002602002808284378083019250505091505060405160208183030381529060405280519060200120905061067e612651565b60056000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015610701578382600202016002806020026040519081016040528092919082600280156106ed576020028201915b8154815260200190600101908083116106d9575b5050505050815260200190600101906106a8565b505050509050600060010281600160028110151561071b57fe5b6020020151600160028110151561072e57fe5b602002015182600160028110151561074257fe5b6020020151600060028110151561075557fe5b602002015183600060028110151561076957fe5b6020020151600160028110151561077c57fe5b602002015184600060028110151561079057fe5b602002015160006002811015156107a357fe5b6020020151171717141515610820576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f4163636f756e7420616c726561647920726567697374657265642e000000000081525060200191505060405180910390fd5b336007600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604060048251377f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d46020820151527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f875602080830151015280600560008481526020019081526020016000209060026108eb92919061267f565b507fdac01a7bcbb991fb855039c695ae8f0c9c186486c283b1d8169cabc86434800360405160405180910390a1505050565b60008260405160200180826002602002808284378083019250505091505060405160208183030381529060405280519060200120905061095c8161237a565b63ffffffff82111515156109d8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f4465706f73697420616d6f756e74206f7574206f662072616e67652e0000000081525060200191505060405180910390fd5b63ffffffff600454830111151515610a3b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602881526020018061289f6028913960400191505060405180910390fd5b610a436126cf565b600660008381526020019081526020016000206000600281101515610a6457fe5b60020201600280602002604051908101604052809291908260028015610a9f576020028201915b815481526020019060010190808311610a8b575b50505050509050604051600182518252602083015160208301527f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d460408301527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f87560608301528460808301526040808301606060408501600060075af181169050604083608084600060065af181169050801515610b3c57600080fd5b505080600660008481526020019081526020016000206000600281101515610b6057fe5b60020201906002610b729291906126f1565b506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd6007600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1630866040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b158015610c9e57600080fd5b505af1158015610cb2573d6000803e3d6000fd5b505050506040513d6020811015610cc857600080fd5b81019080805190602001909291905050501515610d4d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f5472616e736665722066726f6d2073656e646572206661696c65642e0000000081525060200191505060405180910390fd5b826004600082825401925050819055507ffca166bc9d2eded480543aa840c7dfc8e7e7027d84512a4f77defc0d3bbbc30160405160405180910390a150505050565b60035481565b600560205282600052604060002082600281101515610db057fe5b6002020181600281101515610dc157fe5b0160009250925050505481565b600083519050606081604051908082528060200260200182016040528015610e1057816020015b610dfd612731565b815260200190600190039081610df55790505b509050606082604051908082528060200260200182016040528015610e4f57816020015b610e3c612731565b815260200190600190039081610e345790505b509050828851141515610eca576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f496e707574206172726179206c656e677468206d69736d61746368210000000081525060200191505060405180910390fd5b60006001905060008090505b87518110156111ad5760008882815181101515610eef57fe5b906020019060200201516040516020018082600260200280838360005b83811015610f27578082015181840152602081019050610f0c565b50505050905001915050604051602081830303815290604052805190602001209050610f528161237a565b610f5a612651565b60066000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015610fdd57838260020201600280602002604051908101604052809291908260028015610fc9576020028201915b815481526020019060010190808311610fb5575b505050505081526020019060010190610f84565b505050509050604051815151815260208251015160208201526020840260208e010151516040820152602080850260208f0101510151606082015260408251608083600060065af1851694506020820151518152602080830151015160208201528b51604082015260208c0151606082015260406020830151608083600060065af18516945050806006600084815260200190815260200160002090600261108692919061267f565b5060056000838152602001908152602001600020600280602002604051908101604052809291906000905b8282101561110a578382600202016002806020026040519081016040528092919082600280156110f6576020028201915b8154815260200190600101908083116110e2575b5050505050815260200190600101906110b1565b505050509050604051815151815260208251015160208201526020840260208e010151516040820152602080850260208f01015101516060820152604060208502602089010151608083600060065af1851694506020820151518152602080830151015160208201528b51604082015260208c01516060820152604060208502602088010151608083600060065af1851694505050508080600101915050610ed6565b50600181141515611209576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612871602e913960400191505060405180910390fd5b60008090506000876040516020018082600260200280838360005b8381101561123f578082015181840152602081019050611224565b5050505090500191505060405160208183030381529060405280519060200120905060008090505b6009805490508110156112ab578160098281548110151561128457fe5b9060005260206000200154141561129e57600192506112ab565b8080600101915050611267565b5081151515611322576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4e6f6e636520616c7265616479207365656e210000000000000000000000000081525060200191505060405180910390fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634e8ee0e26040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156113a657600080fd5b505afa1580156113ba573d6000803e3d6000fd5b505050506040513d60208110156113d057600080fd5b810190808051906020019092919050505086111561149257600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a00547ab876040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b15801561147957600080fd5b505af115801561148d573d6000803e3d6000fd5b505050505b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631659e67d86868e8e8e600a548f8f6040518963ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001806020018060200189600260200280838360005b8381101561153c578082015181840152602081019050611521565b505050509050018060200188815260200187600260200280838360005b83811015611574578082015181840152602081019050611559565b505050509050018060200186810386528e8181518152602001915080516000925b818410156115e057828490602001906020020151600260200280838360005b838110156115cf5780820151818401526020810190506115b4565b505050509050019260010192611595565b9250505086810385528d8181518152602001915080516000925b8184101561164557828490602001906020020151600260200280838360005b83811015611634578082015181840152602081019050611619565b5050505090500192600101926115fa565b9250505086810384528c8181518152602001915080516000925b818410156116aa57828490602001906020020151600260200280838360005b8381101561169957808201518184015260208101905061167e565b50505050905001926001019261165f565b9250505086810383528a8181518152602001915080516000925b8184101561170f57828490602001906020020151600260200280838360005b838110156116fe5780820151818401526020810190506116e3565b5050505090500192600101926116c4565b92505050868103825287818151815260200191508051906020019080838360005b8381101561174b578082015181840152602081019050611730565b50505050905090810190601f1680156117785780820380516001836020036101000a031916815260200191505b509d505050505050505050505050505060206040518083038186803b1580156117a057600080fd5b505afa1580156117b4573d6000803e3d6000fd5b505050506040513d60208110156117ca57600080fd5b81019080805190602001909291905050501515611832576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260238152602001806128c76023913960400191505060405180910390fd5b60098190806001815401808255809150509060018203906000526020600020016000909192909190915055507f4ef6ed22b1551aeadeb80e67bb3a38788491e81527cc70a85bff611e9e51e18a8960405180806020018281038252838181518152602001915080516000925b818410156118e957828490602001906020020151600260200280838360005b838110156118d85780820151818401526020810190506118bd565b50505050905001926001019261189e565b925050509250505060405180910390a15050505050505050505050565b6000846040516020018082600260200280838360005b8381101561193757808201518184015260208101905061191c565b505050509050019150506040516020818303038152906040528051906020012090506119628161237a565b600073ffffffffffffffffffffffffffffffffffffffff166007600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515611a3a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f556e72656769737465726564206163636f756e7421000000000000000000000081525060200191505060405180910390fd5b83600011158015611a4f575063ffffffff8411155b1515611ac3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f5472616e7366657220616d6f756e74206f7574206f662072616e67652e00000081525060200191505060405180910390fd5b611acb612651565b60066000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015611b4e57838260020201600280602002604051908101604052809291908260028015611b3a576020028201915b815481526020019060010190808311611b26575b505050505081526020019060010190611af5565b5050505090506001604051825151815260208351015160208201527f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d460408201527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f8756060820152867f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000010360808201526040808201606060408401600060075af18216915060408351608083600060065af182169150811515611c0f57600080fd5b50508060066000848152602001908152602001600020906002611c3392919061267f565b5060056000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015611cb757838260020201600280602002604051908101604052809291908260028015611ca3576020028201915b815481526020019060010190808311611c8f575b505050505081526020019060010190611c5e565b5050505090506001604051825151815260208351015160208201527f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d460408201527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f8756060820152867f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000010360808201526040808201606060408401600060075af18216915060408351608083600060065af182169150811515611d7857600080fd5b505060008090506000856040516020018082600260200280838360005b83811015611db0578082015181840152602081019050611d95565b5050505090500191505060405160208183030381529060405280519060200120905060008090505b600980549050811015611e1c5781600982815481101515611df557fe5b90600052602060002001541415611e0f5760019250611e1c565b8080600101915050611dd8565b5081151515611e93576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4e6f6e636520616c7265616479207365656e210000000000000000000000000081525060200191505060405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d79e8413846000600281101515611ee057fe5b6020020151856001600281101515611ef457fe5b60200201518b8b600a548c8c6040518863ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018088600260200280838360005b83811015611f56578082015181840152602081019050611f3b565b5050505090500187600260200280838360005b83811015611f84578082015181840152602081019050611f69565b5050505090500186600260200280838360005b83811015611fb2578082015181840152602081019050611f97565b5050505090500185815260200184815260200183600260200280838360005b83811015611fec578082015181840152602081019050611fd1565b5050505090500180602001828103825283818151815260200191508051906020019080838360005b8381101561202f578082015181840152602081019050612014565b50505050905090810190601f16801561205c5780820380516001836020036101000a031916815260200191505b509850505050505050505060206040518083038186803b15801561207f57600080fd5b505afa158015612093573d6000803e3d6000fd5b505050506040513d60208110156120a957600080fd5b8101908080519060200190929190505050151561212e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f4275726e2070726f6f6620766572696669636174696f6e206661696c6564210081525060200191505060405180910390fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb6007600087815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16896040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15801561222557600080fd5b505af1158015612239573d6000803e3d6000fd5b505050506040513d602081101561224f57600080fd5b810190808051906020019092919050505015156122b7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260358152602001806128ea6035913960400191505060405180910390fd5b8660046000828254039250508190555060098190806001815401808255809150509060018203906000526020600020016000909192909190915055507f40456e504254d84bf7f94f9976a7bf3b49907c184aa8097866e004497dcfe65b60405160405180910390a15050505050505050565b60066020528260005260406000208260028110151561234457fe5b600202018160028110151561235557fe5b0160009250925050505481565b60086020528060005260406000206000915090505481565b60006003544381151561238957fe5b049050806008600084815260200190815260200160002054101561262d576123af612753565b604080519081016040528060056000868152602001908152602001600020600280602002604051908101604052809291906000905b8282101561243d57838260020201600280602002604051908101604052809291908260028015612429576020028201915b815481526020019060010190808311612415575b5050505050815260200190600101906123e4565b50505050815260200160066000868152602001908152602001600020600280602002604051908101604052809291906000905b828210156124c9578382600202016002806020026040519081016040528092919082600280156124b5576020028201915b8154815260200190600101908083116124a1575b505050505081526020019060010190612470565b505050508152509050600160405182515151815260208351510151602082015260208301515151604082015260208084015151015160608201526040835151608083600060065af1821691506020835101515181526020808451015101516020820152602080840151015151604082015260208060208501510151015160608201526040602084510151608083600060065af18216915081151561256c57600080fd5b505080600060028110151561257d57fe5b6020020151600560008581526020019081526020016000209060026125a392919061267f565b5060408051908101604052806040805190810160405280600060010281526020016000600102815250815260200160408051908101604052806000600102815260200160006001028152508152506006600085815260200190815260200160002090600261261292919061267f565b50816008600085815260200190815260200160002081905550505b80600a54101561264d5780600a819055506009600061264c9190612782565b5b5050565b6080604051908101604052806002905b612669612731565b8152602001906001900390816126615790505090565b826002800281019282156126be579160200282015b828111156126bd578251829060026126ad9291906127a3565b5091602001919060020190612694565b5b5090506126cb91906127e3565b5090565b6040805190810160405280600290602082028038833980820191505090505090565b8260028101928215612720579160200282015b8281111561271f578251825591602001919060010190612704565b5b50905061272d919061280f565b5090565b6040805190810160405280600290602082028038833980820191505090505090565b610100604051908101604052806002905b61276c612834565b8152602001906001900390816127645790505090565b50805460008255906000526020600020908101906127a0919061280f565b50565b82600281019282156127d2579160200282015b828111156127d15782518255916020019190600101906127b6565b5b5090506127df919061280f565b5090565b61280c91905b8082111561280857600081816127ff9190612862565b506002016127e9565b5090565b90565b61283191905b8082111561282d576000816000905550600101612815565b5090565b90565b6080604051908101604052806002905b61284c612731565b8152602001906001900390816128445790505090565b50600081556001016000905556fe456c6c6970746963206375727665206f7065726174696f6e73206661696c7572652e2042616420706f696e74733f46756e642070757368657320636f6e74726163742070617374206d6178696d756d2076616c75652e5472616e736665722070726f6f6620766572696669636174696f6e206661696c656421546869732073686f756c646e2774206661696c2e2e2e20536f6d657468696e672077656e74207365766572656c792077726f6e672ea165627a7a7230582072fcf9b8e5fc136042d1df6e1a4d74efd26d0adf50b0210e56f4d6fdb52112eb0029',
                    gas: '4700000'
                },
                function(e, contract) {
                    if (typeof contract.address !== 'undefined') {
                        console.log("ZSC deployed at address \"" + contract.address + "\".");
                        zsc = zscContract.at(contract.address);
                    }
                }
            );
        }
        return "Deploying contracts.";
    },
    recoverZSC: function(address) {
        zsc = zscContract.at(address);
        return "Recovered.";
    },
};

function tracker() {
    var that = this;

    var keypair = zether.createAccount(); // private
    var yHash = web3.sha3(keypair['y'][0].slice(2) + keypair['y'][1].slice(2), { encoding: 'hex' });
    var friends = {};
    var table = {}; // key: txHash of a transfer that _I_ originated, value: callback.
    var epochLength = zsc.epochLength(); // could retain this locally
    var home = eth.accounts[0]; // register this once and for all
    var throwaway;

    var state = function() {
        this.available = 0; // reflects WOULD-BE value in acc (i.e., if rollOver were called). do not touch this manually
        this.pending = 0; // represents an estimate of pTransfers alone. this is used to speed up peeking when transfers are received
        this.nonceUsed = false;
        this.lastRollOver = 0; // would it make sense to just pull this directly every time...?!
    }
    this.state = new state();

    this.restock = function() {
        throwaway = web3.personal.newAccount("");
        web3.personal.unlockAccount(throwaway, "", 0);
    }

    var getEpoch = function(blockNumber) {
        return Math.floor((blockNumber === undefined ? eth.blockNumber + 1 : blockNumber) / epochLength);
    }

    var match = function(address, candidate) {
        return address[0] == candidate[0] && address[1] == candidate[1];
    } // consider refactoring / eliminating this, e.g. using JSON.stringify

    var away = function() { return Math.ceil((eth.blockNumber + 1) / epochLength) * epochLength - (eth.blockNumber + 1); }

    var simulateAccount = function(address) { // "baby" version of the below which will be used for _foreign_ accounts.
        var yHash = web3.sha3(address[0].slice(2) + address[1].slice(2), { encoding: 'hex' });
        var updated = new state();
        updated.acc = [
            [zsc.acc(yHash, 0, 0), zsc.acc(yHash, 0, 1)],
            [zsc.acc(yHash, 1, 0), zsc.acc(yHash, 1, 1)]
        ];
        if (zsc.lastRollOver(yHash) < getEpoch()) {
            var pTransfers = [
                [zsc.pTransfers(yHash, 0, 0), zsc.pTransfers(yHash, 0, 1)],
                [zsc.pTransfers(yHash, 1, 0), zsc.pTransfers(yHash, 1, 1)]
            ];
            updated.acc = zether.add(updated.acc, pTransfers);
        }
        return updated;
    }

    this.simulateBalances = function(blockNumber) {
        var updated = new state();
        updated.available = this.state.available;
        updated.pending = this.state.pending;
        updated.nonceUsed = this.state.nonceUsed;
        updated.lastRollOver = getEpoch(blockNumber)

        if (this.state.lastRollOver < updated.lastRollOver) {
            // if you're _receiving_ a transfer _and_ your account _was stale_, then whoever just sent you something
            // necessarily rolled you over _BEFORE_ depositing an extra amount into your pTransfers.
            // therefore folding this stuff in would lead to an innacurate representation of your account state.
            updated.available += updated.pending;
            updated.pending = 0;
            updated.nonceUsed = false;
        }
        return updated;
    }

    zsc.TransferOccurred(function(error, event) { // automatically watch for incoming transfers
        if (error) {
            console.log("Error: " + error);
        } else if (event.transactionHash in table) {
            table[event.transactionHash]();
        } else {
            for (var i = 0; i < event.args['parties'].length; i++) { // (var party in event.args['parties']) { // var in doesn't work for nested arrays?
                if (that.mine(event.args['parties'][i])) { // weird: this will trigger even when you were the sender.
                    that.state = that.simulateBalances(event.blockNumber);
                    var value;
                    if (value = that.check()) // if rollOver happens remotely, will mimic it locally, and start from 0
                        console.log("Transfer of " + value + " received! New balance is " + (that.state.available + that.state.pending) + ".");
                    // interesting: impossible even to know who sent you funds.
                    // could always report back msg.sender, but that means nothing basically. can always send from different eth address
                    break;
                }
            }
        }
    });

    // todo: add a way to generate throwaway addresses (for receiving), as well as to consolidate throwaways.

    this.me = function() { return keypair.y }

    this.secret = function() { return keypair.x; }

    this.mine = function(address) { return match(address, keypair['y']); }

    this.friend = function(name, address) {
        friends[name] = address;
        return "Friend added.";
    }

    this.balance = function() { return this.state.available + this.state.pending; }

    this.friends = function() { return friends; }

    this.check = function() { // would save a few dereferences to pass in the state, but...
        var pending = this.state.pending;
        var pTransfers = [
            [zsc.pTransfers(yHash, 0, 0), zsc.pTransfers(yHash, 0, 1)],
            [zsc.pTransfers(yHash, 1, 0), zsc.pTransfers(yHash, 1, 1)]
        ];
        this.state.pending = zether.readBalance(pTransfers, keypair['x'], this.state.pending, 4294967295);
        return this.state.pending - pending; // just a shortcut
    }

    this.deposit = function(value) {
        var state = this.simulateBalances();
        var events = zsc.FundOccurred();
        var timer = setTimeout(function() {
            events.stopWatching();
            console.log("Deposit failed...")
        }, 5000);
        zsc.fund(keypair['y'], value, { from: home, gas: 5470000 }, function(error, txHash) {
            if (error) {
                console.log("Error: " + error);
            } else {
                events.watch(function(error, event) {
                    if (error) {
                        console.log("Error: " + error);
                    } else if (txHash == event.transactionHash) {
                        clearTimeout(timer);
                        state.pending += value;
                        that.state = state;
                        console.log("Deposit of " + value + " successful. Balance is now " + (state.available + state.pending) + ".");
                        events.stopWatching();
                    }
                });
            }
        });
        return "Initiating deposit.";
    }

    this.transfer = function(name, value, decoys) { // assuming the names of the other people in the anonymity set are being provided?
        var state = this.simulateBalances();
        if (value > state.available + state.pending)
            throw "Requested transfer amount of " + value + " exceeds account balance of " + (state.available + state.pending) + ".";
        else {
            var wait = away();
            var plural = wait == 1 ? "" : "s";
            if (value > state.available)
                throw "Requested transfer amount of " + value + " exceeds presently available balance of " + state.available + ". Please wait until the next rollover (" + wait + " block" + plural + " away), at which point you'll have " + (state.available + state.pending) + " available.";
            else if (state.nonceUsed)
                throw "You've already made a transfer/withdrawal during this epoch! Please wait till the next one, " + wait + " block" + plural + " away.";
        }

        var size = 2 + (decoys ? decoys.length : 0);
        if (size & (size - 1)) {
            var previous = 1;
            var next = 2;
            while (next < size) {
                previous *= 2;
                next *= 2;
            }
            throw "Anonset's size (including you and the recipient) must be a power of two. Add " + (next - size) + " or remove " + (size - previous) + ".";
        }
        if (!(name in friends))
            throw "Name \"" + name + "\" hasn't been friended yet!";
        var y = [this.me()].concat([friends[name]]); // not yet shuffled
        for (var i = 0; i < (decoys ? decoys.length : 0); i++) {
            if (!(decoys[i] in friends))
                throw "Decoy \"" + decoys[i] + "\" is unknown in friends directory!";
            y.push(friends[decoys[i]])
        }

        var index = [];
        var m = y.length;
        while (m != 0) { // https://bost.ocks.org/mike/shuffle/
            var i = Math.floor(Math.random() * m--);
            var temp = y[i];
            y[i] = y[m];
            y[m] = temp;
            if (this.mine(temp))
                index[0] = m;
            else if (match(temp, friends[name]))
                index[1] = m;
        } // shuffle the array of y's
        if (index[0] % 2 == index[1] % 2) {
            var temp = y[index[1]];
            y[index[1]] = y[index[1] + (index[1] % 2 == 0 ? 1 : -1)];
            y[index[1] + (index[1] % 2 == 0 ? 1 : -1)] = temp;
            index[1] = index[1] + (index[1] % 2 == 0 ? 1 : -1);
        } // make sure you and your friend have opposite parity

        var CL = [];
        var CR = [];
        for (var i = 0; i < y.length; i++) { // (var address in y) { // could use an array.map if i had a better javascript shell.
            var updated = simulateAccount(y[i]);
            CL.push(updated.acc[0]);
            CR.push(updated.acc[1]);
        }

        var proof = zether.proveTransfer(CL, CR, y, state.lastRollOver, keypair['x'], value, state.available - value, index);
        var timer = setTimeout(function() {
            console.log("Transfer failed...");
            // can't, but don't actually need to, delete txHash from the table.
        }, 5000);
        zsc.transfer(proof["L"], proof["R"], y, proof['u'], proof['proof'], { from: throwaway, gas: 547000000 }, function(error, txHash) {
            if (error) {
                console.log("Error: " + error);
            } else {
                table[txHash] = function(error, event) { // event arg not used?
                    if (error) {
                        console.log("Error: " + error);
                    } else {
                        clearTimeout(timer);
                        state.nonceUsed = true;
                        state.pending -= value;
                        that.state = state;
                        console.log("Transfer of " + value + " was successful. Balance now " + (state.available + state.pending) + ".");
                        that.restock(); // trying to hide this from the viewer!
                    }
                };
            }
        });
        return "Initiating transfer.";
    }

    this.withdraw = function(value) {
        var state = this.simulateBalances();
        if (value > state.available + state.pending)
            throw "Requested withdrawal amount of " + value + " exceeds account balance of " + (state.available + state.pending) + ".";
        else {
            var wait = away();
            var plural = wait == 1 ? "" : "s";
            if (value > state.available)
                throw "Requested withdrawal amount of " + value + " exceeds presently available balance of " + state.available + ". Please wait until the next rollover (" + wait + " block" + plural + " away), at which point you'll have " + (state.available + state.pending) + " available.";
            else if (state.nonceUsed)
                throw "You've already made a transfer/withdrawal during this epoch! Please wait till the next one, " + wait + " block" + plural + " away.";
        }
        var updated = simulateAccount(keypair['y']);
        var proof = zether.proveBurn(updated.acc[0], updated.acc[1], keypair['y'], value, state.lastRollOver, keypair['x'], state.available - value);
        var events = zsc.BurnOccurred();
        var timer = setTimeout(function() {
            events.stopWatching();
            console.log("Withdrawal failed...")
        }, 5000);
        zsc.burn(keypair['y'], value, proof['u'], proof['proof'], { from: home, gas: 547000000 }, function(error, txHash) {
            if (error) {
                console.log("Error: " + error);
            } else {
                events.watch(function(error, event) {
                    if (error) {
                        console.log("Error: " + error);
                    } else if (txHash == event.transactionHash) {
                        clearTimeout(timer);
                        state.pending -= value;
                        state.nonceUsed = true; // or: after confirming, that.state.nonceUsed = true.
                        that.state = state;
                        console.log("Withdrawal of " + value + " was successful. Balance now " + (state.available + state.pending) + ".");
                        events.stopWatching();
                    }
                });
            }
        });
        return "Initiating withdrawal.";
    }

    var register = zsc.RegistrationOccurred();
    var timer = setTimeout(function() {
        register.stopWatching();
        console.log("Initial registration failed...!")
    }, 5000);
    zsc.register(keypair['y'], { from: home, gas: 5470000 }, function(error, txHash) {
        if (error) {
            console.log("Error: " + error);
        } else {
            register.watch(function(error, event) {
                if (error) {
                    console.log("Error: " + error);
                } else if (txHash == event.transactionHash) {
                    clearTimeout(timer);
                    console.log("Initial registration successful.");
                    register.stopWatching();
                    that.restock();
                }
            });
        }
    });
}