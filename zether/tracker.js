var zscContract = web3.eth.contract([{ "constant": false, "inputs": [{ "name": "y", "type": "bytes32[2]" }], "name": "register", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }], "name": "fund", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "epochLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "bytes32" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "name": "acc", "outputs": [{ "name": "", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "L", "type": "bytes32[2][]" }, { "name": "R", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2][]" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "transfer", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "burn", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "bytes32" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "name": "pTransfers", "outputs": [{ "name": "", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "bytes32" }], "name": "lastRollOver", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "_coin", "type": "address" }, { "name": "_zkp", "type": "address" }, { "name": "_epochLength", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [], "name": "RegistrationOccurred", "type": "event" }, { "anonymous": false, "inputs": [], "name": "FundOccurred", "type": "event" }, { "anonymous": false, "inputs": [], "name": "BurnOccurred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "parties", "type": "bytes32[2][]" }], "name": "TransferOccurred", "type": "event" }]);
var zsc; // this is sketchy but works.

var demo = {
    deployZSC: function(coin) {
        var zetherverifierContract = web3.eth.contract([{ "constant": true, "inputs": [{ "name": "CL", "type": "bytes32[2][]" }, { "name": "CR", "type": "bytes32[2][]" }, { "name": "L", "type": "bytes32[2][]" }, { "name": "R", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2][]" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyTransfer", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
        var burnverifierContract = web3.eth.contract([{ "constant": true, "inputs": [{ "components": [{ "name": "x", "type": "uint256" }, { "name": "y", "type": "uint256" }], "name": "p1", "type": "tuple" }, { "components": [{ "name": "x", "type": "uint256" }, { "name": "y", "type": "uint256" }], "name": "p2", "type": "tuple" }], "name": "add", "outputs": [{ "components": [{ "name": "x", "type": "uint256" }, { "name": "y", "type": "uint256" }], "name": "r", "type": "tuple" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "CLn", "type": "bytes32[2]" }, { "name": "CRn", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyBurn", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
        var zkpContract = web3.eth.contract([{ "constant": true, "inputs": [{ "name": "CL", "type": "bytes32[2][]" }, { "name": "CR", "type": "bytes32[2][]" }, { "name": "L", "type": "bytes32[2][]" }, { "name": "R", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2][]" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyTransfer", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "CLn", "type": "bytes32[2]" }, { "name": "CRn", "type": "bytes32[2]" }, { "name": "y", "type": "bytes32[2]" }, { "name": "bTransfer", "type": "uint256" }, { "name": "epoch", "type": "uint256" }, { "name": "u", "type": "bytes32[2]" }, { "name": "proof", "type": "bytes" }], "name": "verifyBurn", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "_zether", "type": "address" }, { "name": "_burn", "type": "address" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
        var _zether;
        var _burn;
        var zetherverifier = zetherverifierContract.new({
            from: web3.eth.accounts[0],
            data: '0x60806040526200001f60026200022e640100000000026401000000009004565b610104906040620000329291906200056c565b503480156200004057600080fd5b50620000906040805190810160405280600181526020017f4700000000000000000000000000000000000000000000000000000000000000815250620002e3640100000000026401000000009004565b6101006000820151816000015560208201518160010155905050620000f96040805190810160405280600181526020017f5600000000000000000000000000000000000000000000000000000000000000815250620002e3640100000000026401000000009004565b610102600082015181600001556020820151816001015590505060008090505b60408110156200022757620001736040805190810160405280600181526020017f47000000000000000000000000000000000000000000000000000000000000008152508262000366640100000000026401000000009004565b6000826040811015156200018357fe5b600202016000820151816000015560208201518160010155905050620001ee6040805190810160405280600181526020017f48000000000000000000000000000000000000000000000000000000000000008152508262000366640100000000026401000000009004565b608082604081101515620001fe57fe5b600202016000820151816000015560208201518160010155905050808060010191505062000119565b506200070e565b62000238620005b1565b60018160006040811015156200024a57fe5b602002018181525050818160016040811015156200026457fe5b6020020181815250506000600290505b6040811015620002dd57620002b78383600184036040811015156200029557fe5b6020020151620003ec64010000000002620036eb179091906401000000009004565b8282604081101515620002c657fe5b602002018181525050808060010191505062000274565b50919050565b620002ed620005d5565b6200035f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478360405160200162000325919062000669565b60405160208183030381529060405280519060200120600190048115156200034957fe5b0662000424640100000000026401000000009004565b9050919050565b62000370620005d5565b620003e47f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478484604051602001620003aa92919062000682565b6040516020818303038152906040528051906020012060019004811515620003ce57fe5b0662000424640100000000026401000000009004565b905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156200041957fe5b828409905092915050565b6200042e620005d5565b60005b600115620004e1576000600362000459856003620004fe640100000000026401000000009004565b019050620004a781600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47018115156200049157fe5b04620004fe640100000000026401000000009004565b915080620004c6836002620004fe640100000000026401000000009004565b1415620004d45750620004e1565b6001840193505062000431565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa15156200056057600080fd5b80519250505092915050565b82604081019282156200059e579160200282015b828111156200059d57825182559160200191906001019062000580565b5b509050620005ad9190620005ef565b5090565b61080060405190810160405280604090602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6200061491905b8082111562000610576000816000905550600101620005f6565b5090565b90565b60006200062482620006ae565b620006308185620006b9565b935062000642818560208601620006ce565b80840191505092915050565b620006636200065d82620006c4565b62000704565b82525050565b600062000677828462000617565b915081905092915050565b600062000690828562000617565b91506200069e82846200064e565b6020820191508190509392505050565b600081519050919050565b600081905092915050565b6000819050919050565b60005b83811015620006ee578082015181840152602081019050620006d1565b83811115620006fe576000848401525b50505050565b6000819050919050565b61515d806200071e6000396000f3fe608060405234801561001057600080fd5b5060043610610048576000357c0100000000000000000000000000000000000000000000000000000000900480631659e67d1461004d575b600080fd5b610067600480360361006291908101906145ab565b61007d565b6040516100749190614ba0565b60405180910390f35b6000610087613d55565b600086519050806040519080825280602002602001820160405280156100c757816020015b6100b4613da0565b8152602001906001900390816100ac5790505b5082600001819052508060405190808252806020026020018201604052801561010a57816020015b6100f7613da0565b8152602001906001900390816100ef5790505b5082602001819052508060405190808252806020026020018201604052801561014d57816020015b61013a613da0565b8152602001906001900390816101325790505b5082604001819052508060405190808252806020026020018201604052801561019057816020015b61017d613da0565b8152602001906001900390816101755790505b50826080018190525060008090505b818110156103f45760408051908101604052808d838151811015156101c057fe5b9060200190602002015160006002811015156101d857fe5b60200201516001900481526020018d838151811015156101f457fe5b90602001906020020151600160028110151561020c57fe5b60200201516001900481525083600001518281518110151561022a57fe5b9060200190602002018190525060408051908101604052808c8381518110151561025057fe5b90602001906020020151600060028110151561026857fe5b60200201516001900481526020018c8381518110151561028457fe5b90602001906020020151600160028110151561029c57fe5b6020020151600190048152508360200151828151811015156102ba57fe5b9060200190602002018190525060408051908101604052808b838151811015156102e057fe5b9060200190602002015160006002811015156102f857fe5b60200201516001900481526020018b8381518110151561031457fe5b90602001906020020151600160028110151561032c57fe5b60200201516001900481525083604001518281518110151561034a57fe5b906020019060200201819052506040805190810160405280898381518110151561037057fe5b90602001906020020151600060028110151561038857fe5b602002015160019004815260200189838151811015156103a457fe5b9060200190602002015160016002811015156103bc57fe5b6020020151600190048152508360800151828151811015156103da57fe5b90602001906020020181905250808060010191505061019f565b50604080519081016040528089600060028110151561040f57fe5b602002015160019004815260200189600160028110151561042c57fe5b6020020151600190048152508260600181905250858260a0018181525050604080519081016040528086600060028110151561046457fe5b602002015160019004815260200186600160028110151561048157fe5b6020020151600190048152508260c0018190525061049d613dba565b6104a6856104c3565b90506104b28382610d30565b935050505098975050505050505050565b6104cb613dba565b6104d3613dba565b60408051908101604052806104e9856000613600565b81526020016104f9856020613600565b8152508160200181905250604080519081016040528061051a856040613600565b815260200161052a856060613600565b815250816040018190525060408051908101604052806040805190810160405280610556876080613600565b81526020016105668760a0613600565b815250815260200160408051908101604052806105848760c0613600565b81526020016105948760e0613600565b81525081525081606001819052506105ae83610100613600565b8160c00181815250506105c383610120613600565b8160800181815250506105d883610140613600565b8160a00181815250506105e9613e32565b6105f584610160613600565b81600001818152505061060a84610180613600565b81602001818152505061061f846101a0613600565b8160400181815250508082610100018190525061063a613e54565b60008090505b60068110156106fa57604080519081016040528061066588604085026101c001613600565b815260200161067b88604085026101e001613600565b81525082600001518260068110151561069057fe5b602002018190525060408051908101604052806106b788604085600601026101c001613600565b81526020016106d088604085600601026101e001613600565b8152508260200151826006811015156106e557fe5b60200201819052508080600101915050610640565b5061070d8560806006026101c001613600565b8160400181815250506107288560806006026101e001613600565b81606001818152505080836101200181905250610743613e8a565b600060c06102406105008951030381151561075a57fe5b049050604080519081016040528061077489610500613600565b815260200161078589610520613600565b815250826000018190525060408051908101604052806107a789610540613600565b81526020016107b889610560613600565b815250826020018190525060408051908101604052806107da89610580613600565b81526020016107eb896105a0613600565b8152508260400181905250604080519081016040528061080d896105c0613600565b815260200161081e896105e0613600565b8152508260600181905250604080519081016040528061084089610600613600565b815260200161085189610620613600565b8152508260a00181905250604080519081016040528061087389610640613600565b815260200161088489610660613600565b8152508260c0018190525060408051908101604052806108a689610680613600565b81526020016108b7896106a0613600565b8152508260e0018190525060408051908101604052806108d9896106c0613600565b81526020016108ea896106e0613600565b815250826101000181905250604080519081016040528061090d89610700613600565b815260200161091e89610720613600565b815250826101400181905250604080519081016040528061094189610740613600565b815260200161095289610760613600565b8152508261016001819052506001810360405190808252806020026020018201604052801561099b57816020015b610988613f3d565b8152602001906001900390816109805790505b5082610180018190525060008090505b60018203811015610a52576109c7888260200261078001613600565b836101800151828151811015156109da57fe5b9060200190602002015160006002811015156109f257fe5b602002018181525050610a118860208360018603010261078001613600565b83610180015182815181101515610a2457fe5b906020019060200201516001600281101515610a3c57fe5b60200201818152505080806001019150506109ab565b50600281811515610a5f57fe5b04604051908082528060200260200182016040528015610a9957816020015b610a86613f5f565b815260200190600190039081610a7e5790505b508260800181905250600281811515610aae57fe5b04604051908082528060200260200182016040528015610ae857816020015b610ad5613f5f565b815260200190600190039081610acd5790505b5082610120018190525060008090505b600282811515610b0457fe5b04811015610cd9576040805190810160405280610b2a8a60408587010261074001613600565b8152602001610b428a60408587010261076001613600565b815250836080015182815181101515610b5757fe5b906020019060200201516000600281101515610b6f57fe5b60200201819052506040805190810160405280610b988a60408502606087026107400101613600565b8152602001610bb38a60408502606087026107600101613600565b815250836080015182815181101515610bc857fe5b906020019060200201516001600281101515610be057fe5b60200201819052506040805190810160405280610c098a60408502608087026107400101613600565b8152602001610c248a60408502608087026107600101613600565b81525083610120015182815181101515610c3a57fe5b906020019060200201516000600281101515610c5257fe5b60200201819052506040805190810160405280610c7b8a6040850260a087026107400101613600565b8152602001610c968a6040850260a087026107600101613600565b81525083610120015182815181101515610cac57fe5b906020019060200201516001600281101515610cc457fe5b60200201819052508080600101915050610af8565b5080856000018181525050610cf58760c0830261074001613600565b826101a0018181525050610d108760c0830261076001613600565b826101c0018181525050818560e001819052508495505050505050919050565b60008060028360000151811515610d4357fe5b06141515610d86576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7d90614c5b565b60405180910390fd5b610d8e613f8d565b610e21610de68560a0015186606001518760000151886020015189604001518a60800151604051602001610dc796959493929190614e02565b6040516020818303038152906040528051906020012060019004613619565b84602001518560400151604051602001610e0293929190614e7f565b6040516020818303038152906040528051906020012060019004613619565b816000018181525050610e37816000015161364e565b8160200181905250610e768160000151604051602001610e579190614c7b565b6040516020818303038152906040528051906020012060019004613619565b816040018181525050610e9a816040015182604001516136eb90919063ffffffff16565b816060018181525050610ebe816040015182606001516136eb90919063ffffffff16565b81608001818152505060008090505b60026040811515610eda57fe5b04811015610f6857610efc8160020a83606001516136eb90919063ffffffff16565b8260a0015182604081101515610f0e57fe5b602002018181525050610f318160020a83608001516136eb90919063ffffffff16565b8260a0015160026040811515610f4357fe5b048301604081101515610f5257fe5b6020020181815250508080600101915050610ecd565b50610fa681604001518460600151604051602001610f87929190614dd9565b6040516020818303038152906040528051906020012060019004613619565b81610140018181525050610fe18160400151610fd38360800151846060015161372290919063ffffffff16565b6136eb90919063ffffffff16565b8160c001818152505061107161102a8260c0015161101c6002604081151561100557fe5b0460020a8560c001516136eb90919063ffffffff16565b61375990919063ffffffff16565b6110636110488460600151856040015161375990919063ffffffff16565b6110558560200151613799565b6136eb90919063ffffffff16565b61375990919063ffffffff16565b8160e00181815250506110e56110a38460600151600060028110151561109357fe5b60200201518361014001516137e4565b6110e0856060015160016002811015156110b957fe5b60200201516110db8561014001518661014001516136eb90919063ffffffff16565b6137e4565b61381f565b8161010001819052506111098160e001518460c0015161375990919063ffffffff16565b8161012001818152505061111b613e8a565b8360e00151905061112a613ffa565b611132614073565b6040805190810160405280846101400151815260200184610160015181525090506111cb846101400151846080015185610120015186600001518760200151886040015189606001518a60a001518b60c001518c60e001518d61010001518c6040516020016111ac9c9b9a99989796959493929190614c96565b6040516020818303038152906040528051906020012060019004613619565b826000018181525050856000015160405190808252806020026020018201604052801561121257816020015b6111ff613f3d565b8152602001906001900390816111f75790505b50826020018190525081600001518260200151600081518110151561123357fe5b90602001906020020151600060028110151561124b57fe5b60200201818152505081600001518260200151600081518110151561126c57fe5b90602001906020020151600160028110151561128457fe5b6020020181815250506000600190505b86600001518110156114c157836101800151600182038151811015156112b657fe5b9060200190602002015160006002811015156112ce57fe5b60200201518360200151828151811015156112e557fe5b9060200190602002015160006002811015156112fd57fe5b6020020181815250508361018001516001820381518110151561131c57fe5b90602001906020020151600160028110151561133457fe5b602002015183602001518281518110151561134b57fe5b90602001906020020151600160028110151561136357fe5b6020020181815250506113dc83602001518281518110151561138157fe5b90602001906020020151600060028110151561139957fe5b6020020151846020015160008151811015156113b157fe5b9060200190602002015160006002811015156113c957fe5b602002015161375990919063ffffffff16565b836020015160008151811015156113ef57fe5b90602001906020020151600060028110151561140757fe5b60200201818152505061148083602001518281518110151561142557fe5b90602001906020020151600160028110151561143d57fe5b60200201518460200151600081518110151561145557fe5b90602001906020020151600160028110151561146d57fe5b602002015161375990919063ffffffff16565b8360200151600081518110151561149357fe5b9060200190602002015160016002811015156114ab57fe5b6020020181815250508080600101915050611294565b506114ca6140a1565b60008090505b87600001518110156115d15761154e826115496000846040811015156114f257fe5b600202016040805190810160405290816000820154815260200160018201548152505087602001518581518110151561152757fe5b90602001906020020151600060028110151561153f57fe5b60200201516137e4565b61381f565b91506115c2826115bd60808460408110151561156657fe5b600202016040805190810160405290816000820154815260200160018201548152505087602001518581518110151561159b57fe5b9060200190602002015160016002811015156115b357fe5b60200201516137e4565b61381f565b915080806001019150506114d0565b506116326115f46115ea866020015186600001516137e4565b866000015161381f565b61162d8361162861010260408051908101604052908160008201548152602001600182015481525050896101a001516137e4565b61381f565b613865565b1515611673576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161166a90614bdb565b60405180910390fd5b60008090505b87600001518110156118025761170a6116cd85602001518381518110151561169d57fe5b9060200190602002015160006002811015156116b557fe5b6020020151866000015161375990919063ffffffff16565b8560200151838151811015156116df57fe5b9060200190602002015160006002811015156116f757fe5b60200201516136eb90919063ffffffff16565b84602001518281518110151561171c57fe5b90602001906020020151600060028110151561173457fe5b6020020181815250506117c261178585602001518381518110151561175557fe5b90602001906020020151600160028110151561176d57fe5b6020020151866000015161375990919063ffffffff16565b85602001518381518110151561179757fe5b9060200190602002015160016002811015156117af57fe5b60200201516136eb90919063ffffffff16565b8460200151828151811015156117d457fe5b9060200190602002015160016002811015156117ec57fe5b6020020181815250508080600101915050611679565b506040805190810160405280600081526020016000815250905060008090505b8760000151811015611923576118a08261189b60008460408110151561184457fe5b600202016040805190810160405290816000820154815260200160018201548152505087602001518581518110151561187957fe5b90602001906020020151600060028110151561189157fe5b60200201516137e4565b61381f565b91506119148261190f6080846040811015156118b857fe5b60020201604080519081016040529081600082015481526020016001820154815250508760200151858151811015156118ed57fe5b90602001906020020151600160028110151561190557fe5b60200201516137e4565b61381f565b91508080600101915050611822565b5061198461194661193c866040015186600001516137e4565b866060015161381f565b61197f8361197a61010260408051908101604052908160008201548152602001600182015481525050896101c001516137e4565b61381f565b613865565b15156119c5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119bc90614c1b565b60405180910390fd5b8260000151836020015160008151811015156119dd57fe5b9060200190602002015160006002811015156119f557fe5b602002018181525050826000015183602001516000815181101515611a1657fe5b906020019060200201516001600281101515611a2e57fe5b6020020181815250506000600190505b8760000151811015611c6b5784610180015160018203815181101515611a6057fe5b906020019060200201516000600281101515611a7857fe5b6020020151846020015182815181101515611a8f57fe5b906020019060200201516000600281101515611aa757fe5b60200201818152505084610180015160018203815181101515611ac657fe5b906020019060200201516001600281101515611ade57fe5b6020020151846020015182815181101515611af557fe5b906020019060200201516001600281101515611b0d57fe5b602002018181525050611b86846020015182815181101515611b2b57fe5b906020019060200201516000600281101515611b4357fe5b602002015185602001516000815181101515611b5b57fe5b906020019060200201516000600281101515611b7357fe5b602002015161375990919063ffffffff16565b84602001516000815181101515611b9957fe5b906020019060200201516000600281101515611bb157fe5b602002018181525050611c2a846020015182815181101515611bcf57fe5b906020019060200201516001600281101515611be757fe5b602002015185602001516000815181101515611bff57fe5b906020019060200201516001600281101515611c1757fe5b602002015161375990919063ffffffff16565b84602001516000815181101515611c3d57fe5b906020019060200201516001600281101515611c5557fe5b6020020181815250508080600101915050611a3e565b50611c79836000015161388d565b836040018181525050611ca98860600151611ca48660a00151611c9f87604001516138c3565b6137e4565b61381f565b83606001819052508660000151604051908082528060200260200182016040528015611cef57816020015b611cdc613f3d565b815260200190600190039081611cd45790505b508360c0018190525060028760000151811515611d0857fe5b04604051908082528060200260200182016040528015611d4257816020015b611d2f613f5f565b815260200190600190039081611d275790505b508360e0018190525060028760000151811515611d5b57fe5b04604051908082528060200260200182016040528015611d9557816020015b611d82613f5f565b815260200190600190039081611d7a5790505b5083610100018190525060008090505b60028860000151811515611db557fe5b048110156125545760008090505b886000015181101561228c57611e5285602001518a60000151600285028401811515611deb57fe5b06815181101515611df857fe5b906020019060200201516000600281101515611e1057fe5b60200201518660c0015183815181101515611e2757fe5b906020019060200201516000600281101515611e3f57fe5b602002015161372290919063ffffffff16565b8560c0015182815181101515611e6457fe5b906020019060200201516000600281101515611e7c57fe5b602002018181525050611f0885602001518a60000151600285028401811515611ea157fe5b06815181101515611eae57fe5b906020019060200201516001600281101515611ec657fe5b60200201518660c0015183815181101515611edd57fe5b906020019060200201516001600281101515611ef557fe5b602002015161372290919063ffffffff16565b8560c0015182815181101515611f1a57fe5b906020019060200201516001600281101515611f3257fe5b602002018181525050611fd98560e0015183815181101515611f5057fe5b906020019060200201516000600281101515611f6857fe5b6020020151611fd48c6040015184815181101515611f8257fe5b9060200190602002015188602001518d60000151600288028701811515611fa557fe5b06815181101515611fb257fe5b906020019060200201516000600281101515611fca57fe5b60200201516137e4565b61381f565b8560e0015183815181101515611feb57fe5b90602001906020020151600060028110151561200357fe5b60200201819052506120a98560e001518381518110151561202057fe5b90602001906020020151600160028110151561203857fe5b60200201516120a48c604001518481518110151561205257fe5b9060200190602002015188602001518d6000015160028802870181151561207557fe5b0681518110151561208257fe5b90602001906020020151600160028110151561209a57fe5b60200201516137e4565b61381f565b8560e00151838151811015156120bb57fe5b9060200190602002015160016002811015156120d357fe5b602002018190525061217a856101000151838151811015156120f157fe5b90602001906020020151600060028110151561210957fe5b60200201516121758c608001518481518110151561212357fe5b9060200190602002015188602001518d6000015160028802870181151561214657fe5b0681518110151561215357fe5b90602001906020020151600060028110151561216b57fe5b60200201516137e4565b61381f565b8561010001518381518110151561218d57fe5b9060200190602002015160006002811015156121a557fe5b602002018190525061224c856101000151838151811015156121c357fe5b9060200190602002015160016002811015156121db57fe5b60200201516122478c60800151848151811015156121f557fe5b9060200190602002015188602001518d6000015160028802870181151561221857fe5b0681518110151561222557fe5b90602001906020020151600160028110151561223d57fe5b60200201516137e4565b61381f565b8561010001518381518110151561225f57fe5b90602001906020020151600160028110151561227757fe5b60200201819052508080600101915050611dc3565b506123086122fe8560e00151838151811015156122a557fe5b9060200190602002015160006002811015156122bd57fe5b60200201516122f98860800151858151811015156122d757fe5b9060200190602002015160006002811015156122ef57fe5b60200201516138ef565b61381f565b85604001516137e4565b8460e001518281518110151561231a57fe5b90602001906020020151600060028110151561233257fe5b60200201819052506123b56123ab8560e001518381518110151561235257fe5b90602001906020020151600160028110151561236a57fe5b60200201516123a688608001518581518110151561238457fe5b90602001906020020151600160028110151561239c57fe5b60200201516138ef565b61381f565b85604001516137e4565b8460e00151828151811015156123c757fe5b9060200190602002015160016002811015156123df57fe5b602002018190525061246461245a8561010001518381518110151561240057fe5b90602001906020020151600060028110151561241857fe5b60200201516124558861012001518581518110151561243357fe5b90602001906020020151600060028110151561244b57fe5b60200201516138ef565b61381f565b85604001516137e4565b8461010001518281518110151561247757fe5b90602001906020020151600060028110151561248f57fe5b602002018190525061251461250a856101000151838151811015156124b057fe5b9060200190602002015160016002811015156124c857fe5b6020020151612505886101200151858151811015156124e357fe5b9060200190602002015160016002811015156124fb57fe5b60200201516138ef565b61381f565b85604001516137e4565b8461010001518281518110151561252757fe5b90602001906020020151600160028110151561253f57fe5b60200201819052508080600101915050611da5565b5060008090505b87600001518110156126ee576125c784608001516125c28b600001518481518110151561258457fe5b906020019060200201518760200151858151811015156125a057fe5b9060200190602002015160006002811015156125b857fe5b60200201516137e4565b61381f565b846080018190525061262f8460a0015161262a8b60200151848151811015156125ec57fe5b9060200190602002015187602001518581518110151561260857fe5b90602001906020020151600060028110151561262057fe5b60200201516137e4565b61381f565b8460a001819052506126d88461012001516126d38b608001518481518110151561265557fe5b906020019060200201516126ce8860c001518681518110151561267457fe5b90602001906020020151600160028110151561268c57fe5b60200201518960c00151878151811015156126a357fe5b9060200190602002015160006002811015156126bb57fe5b60200201516136eb90919063ffffffff16565b6137e4565b61381f565b846101200181905250808060010191505061255b565b5061271661270c84608001516127078760e001516138ef565b61381f565b84604001516137e4565b836080018190525061274661273c8460a001516127378761010001516138ef565b61381f565b84604001516137e4565b8360a0018190525061277d83610120015161277861276d87610160015187600001516137e4565b87610140015161381f565b613865565b15156127be576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016127b590614bfb565b60405180910390fd5b61280f6128056127f36101006040805190810160405290816000820154815260200160018201548152505086600001516137e4565b6128008760c001516138ef565b61381f565b84604001516137e4565b836101400181905250612820613e32565b87610100015190506128306140bb565b61283d82600001516138c3565b816000018181525050600160028a6000015181151561285857fe5b040360405190808252806020026020018201604052801561289357816020015b612880613f5f565b8152602001906001900390816128785790505b5081602001819052506000600190505b60028a600001518115156128b357fe5b04811015612a345761293c6128fb876101000151838151811015156128d457fe5b9060200190602002015160006002811015156128ec57fe5b602002015185604001516137e4565b6129378860e001518481518110151561291057fe5b90602001906020020151600060028110151561292857fe5b602002015185600001516137e4565b61381f565b82602001516001830381518110151561295157fe5b90602001906020020151600060028110151561296957fe5b60200201819052506129f26129b18761010001518381518110151561298a57fe5b9060200190602002015160016002811015156129a257fe5b602002015185604001516137e4565b6129ed8860e00151848151811015156129c657fe5b9060200190602002015160016002811015156129de57fe5b602002015185600001516137e4565b61381f565b826020015160018303815181101515612a0757fe5b906020019060200201516001600281101515612a1f57fe5b602002018190525080806001019150506128a3565b50612a62612a4b86610140015184604001516137e4565b612a5d876060015184600001516137e4565b61381f565b8160600181905250612ac3612a8086610140015184602001516137e4565b612abe8761010001516000815181101515612a9757fe5b906020019060200201516000600281101515612aaf57fe5b602002015184600001516137e4565b61381f565b8160400181905250612b0e6040805190810160405280600681526020017f5a657468657200000000000000000000000000000000000000000000000000008152508b60a00151613968565b8160800181905250612b42612b2b826080015184602001516137e4565b612b3d8c60c0015184600001516137e4565b61381f565b8160a00181905250612c3e612bc4612bba8761010001516000815181101515612b6757fe5b906020019060200201516000600281101515612b7f57fe5b60200201518861010001516000815181101515612b9857fe5b906020019060200201516001600281101515612bb057fe5b602002015161381f565b84604001516137e4565b612c39612c2f8860e001516000815181101515612bdd57fe5b906020019060200201516000600281101515612bf557fe5b60200201518960e001516000815181101515612c0d57fe5b906020019060200201516001600281101515612c2557fe5b602002015161381f565b84600001516137e4565b61381f565b8160c00181905250612d39612cd9612cac612c778860600151612c728c6060015188602001516136eb90919063ffffffff16565b6137e4565b612ca78960a00151612ca2612c9d8e608001518a602001516136eb90919063ffffffff16565b6138c3565b6137e4565b61381f565b612cd48860800151612ccf8c6080015188600001516136eb90919063ffffffff16565b6137e4565b61381f565b612d348760e001516000815181101515612cef57fe5b906020019060200201516000600281101515612d0757fe5b6020020151612d2f612d2a8c6060015188600001516136eb90919063ffffffff16565b6138c3565b6137e4565b61381f565b8160e00181905250612e04612dd7612d8d61010060408051908101604052908160008201548152602001600182015481525050612d8886600001518c61012001516136eb90919063ffffffff16565b6137e4565b612dd261010260408051908101604052908160008201548152602001600182015481525050612dcd87600001518f608001516136eb90919063ffffffff16565b6137e4565b61381f565b612dff612dfa8460e00151612df58c610100015188600001516137e4565b61381f565b6138ef565b61381f565b8161010001819052506000612e6b86600001518360200151846040015185606001518660a001518760c00151886101000151604051602001612e4c9796959493929190614d60565b6040516020818303038152906040528051906020012060019004613619565b90508961010001516000015181141515612eba576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612eb190614bbb565b60405180910390fd5b612ec2614132565b612f0b84600001518c60c001518d608001518e60a00151604051602001612eec9493929190614eb6565b6040516020818303038152906040528051906020012060019004613619565b816080018181525050612f436101006040805190810160405290816000820154815260200160018201548152505082608001516137e4565b8160000181905250612fb16080604080602002604051908101604052809291906000905b82821015612fa3578382600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190612f67565b505050508a602001516139d8565b8160200181905250612fd8612fce8a602001518b60400151613a4f565b8a60a00151613ab6565b816040018190525061307e6130038c60200151612ffe8e604001518d61014001516137e4565b61381f565b6130796130676000604080602002604051908101604052809291906000905b8282101561305e578382600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190613022565b50505050613b2f565b6130748d604001516138c3565b6137e4565b61381f565b81606001819052506130e46130c06130bb610102604080519081016040529081600082015481526020016001820154815250508e60a001516137e4565b6138ef565b6130df83606001516130da85602001518660400151613b77565b61381f565b61381f565b816060018190525061310b816060015161310683600001518e60c001516137e4565b61381f565b816060018190525061311b613e54565b8b6101200151905060008090505b600681101561326857613199836080015183600001518360068110151561314c57fe5b602002015184602001518460068110151561316357fe5b602002015160405160200161317a93929190614e7f565b6040516020818303038152906040528051906020012060019004613619565b83608001818152505082608001518360a00151826006811015156131b957fe5b60200201818152505060006131d1846080015161388d565b905061325261320d8460000151846006811015156131eb57fe5b602002015161320860028860800151613bdb90919063ffffffff16565b6137e4565b61324d61324386602001518660068110151561322557fe5b602002015161323e600287613bdb90919063ffffffff16565b6137e4565b876060015161381f565b61381f565b8460600181905250508080600101915050613129565b5060018260c00151600060408110151561327e57fe5b60200201818152505060008090505b60068110156132ff576132d68360a00151826006811015156132ab57fe5b60200201518460c0015160006040811015156132c357fe5b60200201516136eb90919063ffffffff16565b8360c0015160006040811015156132e957fe5b602002018181525050808060010191505061328d565b50613308614195565b6133288360c00151600060408110151561331e57fe5b602002015161388d565b8360c00151600060408110151561333b57fe5b60200201818152505060008090505b6002604081151561335757fe5b0481101561346a5760008090505b6040828260019060020a0201101561345e5760008160019060020a0283019050838160408110151561339357fe5b602002015115156134525760006133eb8760a00151846001600603036006811015156133bb57fe5b60200201518860a00151856001600603036006811015156133d857fe5b60200201516136eb90919063ffffffff16565b9050613416818860c001518660408110151561340357fe5b60200201516136eb90919063ffffffff16565b8760c001518360408110151561342857fe5b6020020181815250506001858360408110151561344157fe5b602002019015159081151581525050505b50806001019050613365565b5080600101905061334a565b506134736140a1565b61347b6140a1565b60008090505b604081101561353a576134e4836134df6000846040811015156134a057fe5b60020201604080519081016040529081600082015481526020016001820154815250508960c00151856040811015156134d557fe5b60200201516137e4565b61381f565b925061352b826135268860200151846040811015156134ff57fe5b60200201518960c001518560016040030360408110151561351c57fe5b60200201516137e4565b61381f565b91508080600101915050613481565b506135436140a1565b61359761356a6135578588604001516137e4565b6135658589606001516137e4565b61381f565b613592886000015161358d89606001518a604001516136eb90919063ffffffff16565b6137e4565b61381f565b90506135a7866060015182613865565b15156135e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016135df90614c3b565b60405180910390fd5b60019e50505050505050505050505050505092915050565b6000604051826020850101518152805191505092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018281151561364657fe5b069050919050565b6136566141b9565b600181600060408110151561366757fe5b6020020181815250508181600160408110151561368057fe5b6020020181815250506000600290505b60408110156136e5576136c18383600184036040811015156136ae57fe5b60200201516136eb90919063ffffffff16565b82826040811015156136cf57fe5b6020020181815250508080600101915050613690565b50919050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000180151561371757fe5b828409905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000180151561374e57fe5b828408905092915050565b60008183101561378d5782827f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000010301613791565b8183035b905092915050565b600080600090505b60408110156137de576137cf83826040811015156137bb57fe5b60200201518361372290919063ffffffff16565b915080806001019150506137a1565b50919050565b6137ec6140a1565b604051835181526020840151602082015282604082015260408260608360075afa151561381857600080fd5b5092915050565b6138276140a1565b6040518351815260208401516020820152825160408201526020830151606082015260408260808360065afa151561385e57600080fd5b5092915050565b600081600001518360000151148015613885575081602001518360200151145b905092915050565b60006138bc8260027f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000103613bdb565b9050919050565b6000817f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001039050919050565b6138f76140a1565b6040805190810160405280836000015181526020017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47846020015181151561393b57fe5b067f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47038152509050919050565b6139706140a1565b6139d07f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4784846040516020016139a7929190614b78565b60405160208183030381529060405280519060200120600190048115156139ca57fe5b06613c48565b905092915050565b6139e06141dd565b60008090505b6040811015613a4857613a258482604081101515613a0057fe5b6020020151613a208584604081101515613a1657fe5b602002015161388d565b6137e4565b8282604081101515613a3357fe5b602002018190525080806001019150506139e6565b5092915050565b613a576141b9565b60008090505b6040811015613aaf57613a8b838583604081101515613a7857fe5b60200201516136eb90919063ffffffff16565b8282604081101515613a9957fe5b6020020181815250508080600101915050613a5d565b5092915050565b613abe6141b9565b60008090505b6040811015613b2857613b048382604081101515613ade57fe5b60200201518583604081101515613af157fe5b602002015161372290919063ffffffff16565b8282604081101515613b1257fe5b6020020181815250508080600101915050613ac4565b5092915050565b613b376140a1565b60008090505b6040811015613b7157613b62828483604081101515613b5857fe5b602002015161381f565b91508080600101915050613b3d565b50919050565b613b7f6140a1565b60008090505b6040811015613bd457613bc582613bc08684604081101515613ba357fe5b60200201518685604081101515613bb657fe5b60200201516137e4565b61381f565b91508080600101915050613b85565b5092915050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa1515613c3c57600080fd5b80519250505092915050565b613c506140a1565b60005b600115613ccb5760006003613c69856003613ce8565b019050613ca581600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4701811515613c9f57fe5b04613ce8565b915080613cb3836002613ce8565b1415613cbf5750613ccb565b60018401935050613c53565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa1515613d4957600080fd5b80519250505092915050565b61012060405190810160405280606081526020016060815260200160608152602001613d7f613da0565b81526020016060815260200160008152602001613d9a613da0565b81525090565b604080519081016040528060008152602001600081525090565b6108406040519081016040528060008152602001613dd6613da0565b8152602001613de3613da0565b8152602001613df0613f5f565b8152602001600081526020016000815260200160008152602001613e1261420c565b8152602001613e1f6142bf565b8152602001613e2c6142e1565b81525090565b6060604051908101604052806000815260200160008152602001600081525090565b61034060405190810160405280613e69614317565b8152602001613e76614317565b815260200160008152602001600081525090565b61032060405190810160405280613e9f613da0565b8152602001613eac613da0565b8152602001613eb9613da0565b8152602001613ec6613da0565b815260200160608152602001613eda613da0565b8152602001613ee7613da0565b8152602001613ef4613da0565b8152602001613f01613da0565b815260200160608152602001613f15613da0565b8152602001613f22613da0565b81526020016060815260200160008152602001600081525090565b6040805190810160405280600290602082028038833980820191505090505090565b6080604051908101604052806002905b613f77613da0565b815260200190600190039081613f6f5790505090565b6111406040519081016040528060008152602001613fa9614346565b8152602001600081526020016000815260200160008152602001613fcb614346565b81526020016000815260200160008152602001613fe6613da0565b815260200160008152602001600081525090565b61020060405190810160405280600081526020016060815260200160008152602001614024613da0565b8152602001614031613da0565b815260200161403e613da0565b8152602001606081526020016060815260200160608152602001614060613da0565b815260200161406d613da0565b81525090565b6080604051908101604052806002905b61408b613da0565b8152602001906001900390816140835790505090565b604080519081016040528060008152602001600081525090565b6102006040519081016040528060008152602001606081526020016140de613da0565b81526020016140eb613da0565b81526020016140f8613da0565b8152602001614105613da0565b8152602001614112613da0565b815260200161411f613da0565b815260200161412c613da0565b81525090565b61216060405190810160405280614147613da0565b815260200161415461436a565b8152602001614161614346565b815260200161416e613da0565b815260200160008152602001614182614399565b815260200161418f614346565b81525090565b61080060405190810160405280604090602082028038833980820191505090505090565b61080060405190810160405280604090602082028038833980820191505090505090565b611000604051908101604052806040905b6141f6613da0565b8152602001906001900390816141ee5790505090565b61032060405190810160405280614221613da0565b815260200161422e613da0565b815260200161423b613da0565b8152602001614248613da0565b81526020016060815260200161425c613da0565b8152602001614269613da0565b8152602001614276613da0565b8152602001614283613da0565b815260200160608152602001614297613da0565b81526020016142a4613da0565b81526020016060815260200160008152602001600081525090565b6060604051908101604052806000815260200160008152602001600081525090565b610340604051908101604052806142f6614317565b8152602001614303614317565b815260200160008152602001600081525090565b610180604051908101604052806006905b614330613da0565b8152602001906001900390816143285790505090565b61080060405190810160405280604090602082028038833980820191505090505090565b611000604051908101604052806040905b614383613da0565b81526020019060019003908161437b5790505090565b60c060405190810160405280600690602082028038833980820191505090505090565b600082601f83011215156143cf57600080fd5b81356143e26143dd82614f28565b614efb565b9150818183526020840193506020810190508385604084028201111561440757600080fd5b60005b83811015614437578161441d8882614441565b84526020840193506040830192505060018101905061440a565b5050505092915050565b600082601f830112151561445457600080fd5b600261446761446282614f50565b614efb565b9150818385602084028201111561447d57600080fd5b60005b838110156144ad5781614493888261452d565b845260208401935060208301925050600181019050614480565b5050505092915050565b600082601f83011215156144ca57600080fd5b60026144dd6144d882614f72565b614efb565b915081838560208402820111156144f357600080fd5b60005b838110156145235781614509888261452d565b8452602084019350602083019250506001810190506144f6565b5050505092915050565b600061453982356150c3565b905092915050565b600082601f830112151561455457600080fd5b813561456761456282614f94565b614efb565b9150808252602083016020830185838301111561458357600080fd5b61458e8382846150d7565b50505092915050565b60006145a382356150cd565b905092915050565b600080600080600080600080610140898b0312156145c857600080fd5b600089013567ffffffffffffffff8111156145e257600080fd5b6145ee8b828c016143bc565b985050602089013567ffffffffffffffff81111561460b57600080fd5b6146178b828c016143bc565b975050604089013567ffffffffffffffff81111561463457600080fd5b6146408b828c016143bc565b96505060606146518b828c016144b7565b95505060a089013567ffffffffffffffff81111561466e57600080fd5b61467a8b828c016143bc565b94505060c061468b8b828c01614597565b93505060e061469c8b828c016144b7565b92505061012089013567ffffffffffffffff8111156146ba57600080fd5b6146c68b828c01614541565b9150509295985092959890939650565b60006146e283836147b3565b60808301905092915050565b60006146fa8383614ae5565b60408301905092915050565b600061471182614fee565b61471b8185615059565b935061472683614fc0565b60005b828110156147545761473c8683516146d6565b955061474782615025565b9150600181019050614729565b50849250505092915050565b61476981615004565b6147738184615075565b925061477e82614fd7565b60005b828110156147ac576147948583516146ee565b945061479f8261503f565b9150600181019050614781565b5050505050565b6147bc81614ff9565b6147c6818461506a565b92506147d182614fcd565b60005b828110156147ff576147e78583516146ee565b94506147f282615032565b91506001810190506147d4565b5050505050565b61480f81614ff9565b6148198184615075565b925061482482614fcd565b60005b828110156148525761483a8583516146ee565b945061484582615032565b9150600181019050614827565b5050505050565b60006148648261500f565b61486e8185615080565b935061487983614fe1565b60005b828110156148a75761488f8683516146ee565b955061489a8261504c565b915060018101905061487c565b50849250505092915050565b6148bc816150ad565b82525050565b60006148cd8261501a565b6148d781856150a2565b93506148e78185602086016150e6565b80840191505092915050565b6000614900602a83615091565b91507f5369676d612070726f746f636f6c206368616c6c656e676520657175616c697460008301527f79206661696c7572652e000000000000000000000000000000000000000000006020830152604082019050919050565b6000614966601d83615091565b91507f5265636f76657279206661696c75726520666f7220425e78202a20412e0000006000830152602082019050919050565b60006149a6602183615091565b91507f496e646578206f70706f736974652070617269747920636865636b206661696c60008301527f2e000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000614a0c601d83615091565b91507f5265636f76657279206661696c75726520666f7220435e78202a20442e0000006000830152602082019050919050565b6000614a4c602583615091565b91507f496e6e65722070726f6475637420657175616c69747920636865636b2066616960008301527f6c7572652e0000000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000614ab2602083615091565b91507f416e6f6e796d697479207365742073697a65206d757374206265206576656e216000830152602082019050919050565b604082016000820151614afb6000850182614b43565b506020820151614b0e6020850182614b43565b50505050565b604082016000820151614b2a6000850182614b43565b506020820151614b3d6020850182614b43565b50505050565b614b4c816150b9565b82525050565b614b5b816150b9565b82525050565b614b72614b6d826150b9565b615119565b82525050565b6000614b8482856148c2565b9150614b908284614b61565b6020820191508190509392505050565b6000602082019050614bb560008301846148b3565b92915050565b60006020820190508181036000830152614bd4816148f3565b9050919050565b60006020820190508181036000830152614bf481614959565b9050919050565b60006020820190508181036000830152614c1481614999565b9050919050565b60006020820190508181036000830152614c34816149ff565b9050919050565b60006020820190508181036000830152614c5481614a3f565b9050919050565b60006020820190508181036000830152614c7481614aa5565b9050919050565b6000602082019050614c906000830184614b52565b92915050565b60006102e082019050614cac600083018f614b52565b8181036020830152614cbe818e614706565b90508181036040830152614cd2818d614706565b9050614ce1606083018c614b14565b614cee60a083018b614b14565b614cfb60e083018a614b14565b614d09610120830189614b14565b614d17610160830188614b14565b614d256101a0830187614b14565b614d336101e0830186614b14565b614d41610220830185614b14565b614d4f610260830184614760565b9d9c50505050505050505050505050565b600061018082019050614d76600083018a614b52565b8181036020830152614d888189614706565b9050614d976040830188614b14565b614da46080830187614b14565b614db160c0830186614b14565b614dbf610100830185614b14565b614dcd610140830184614b14565b98975050505050505050565b600060a082019050614dee6000830185614b52565b614dfb6020830184614806565b9392505050565b600060e082019050614e176000830189614b52565b614e246020830188614b14565b8181036060830152614e368187614859565b90508181036080830152614e4a8186614859565b905081810360a0830152614e5e8185614859565b905081810360c0830152614e728184614859565b9050979650505050505050565b600060a082019050614e946000830186614b52565b614ea16020830185614b14565b614eae6060830184614b14565b949350505050565b6000608082019050614ecb6000830187614b52565b614ed86020830186614b52565b614ee56040830185614b52565b614ef26060830184614b52565b95945050505050565b6000604051905081810181811067ffffffffffffffff82111715614f1e57600080fd5b8060405250919050565b600067ffffffffffffffff821115614f3f57600080fd5b602082029050602081019050919050565b600067ffffffffffffffff821115614f6757600080fd5b602082029050919050565b600067ffffffffffffffff821115614f8957600080fd5b602082029050919050565b600067ffffffffffffffff821115614fab57600080fd5b601f19601f8301169050602081019050919050565b6000602082019050919050565b6000819050919050565b6000819050919050565b6000602082019050919050565b600081519050919050565b600060029050919050565b600060029050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b600082825260208201905092915050565b600081905092915050565b600081905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60008115159050919050565b6000819050919050565b6000819050919050565b6000819050919050565b82818337600083830152505050565b60005b838110156151045780820151818401526020810190506150e9565b83811115615113576000848401525b50505050565b600081905091905056fea265627a7a723058208c6315b47422f680915fffc77229323f8404cf17411952c0eef2aac14f9690066c6578706572696d656e74616cf50037',
            gas: '470000000'
        }, function(e, contract) {
            if (typeof contract.address !== 'undefined') {
                _zether = contract.address;
                if (_zether && _burn) {
                    initZSC();
                }
            }
        });
        var burnverifier = burnverifierContract.new({
            from: web3.eth.accounts[0],
            data: '0x60806040526200001f60026200022b640100000000026401000000009004565b60849060206200003192919062000569565b503480156200003f57600080fd5b506200008f6040805190810160405280600181526020017f4700000000000000000000000000000000000000000000000000000000000000815250620002e0640100000000026401000000009004565b60806000820151816000015560208201518160010155905050620000f76040805190810160405280600181526020017f5600000000000000000000000000000000000000000000000000000000000000815250620002e0640100000000026401000000009004565b6082600082015181600001556020820151816001015590505060008090505b60208110156200022457620001706040805190810160405280600181526020017f47000000000000000000000000000000000000000000000000000000000000008152508262000363640100000000026401000000009004565b6000826020811015156200018057fe5b600202016000820151816000015560208201518160010155905050620001eb6040805190810160405280600181526020017f48000000000000000000000000000000000000000000000000000000000000008152508262000363640100000000026401000000009004565b604082602081101515620001fb57fe5b600202016000820151816000015560208201518160010155905050808060010191505062000116565b506200070b565b62000235620005ae565b60018160006020811015156200024757fe5b602002018181525050818160016020811015156200026157fe5b6020020181815250506000600290505b6020811015620002da57620002b48383600184036020811015156200029257fe5b6020020151620003e964010000000002620011c6179091906401000000009004565b8282602081101515620002c357fe5b602002018181525050808060010191505062000271565b50919050565b620002ea620005d2565b6200035c7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478360405160200162000322919062000666565b60405160208183030381529060405280519060200120600190048115156200034657fe5b0662000421640100000000026401000000009004565b9050919050565b6200036d620005d2565b620003e17f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478484604051602001620003a79291906200067f565b6040516020818303038152906040528051906020012060019004811515620003cb57fe5b0662000421640100000000026401000000009004565b905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156200041657fe5b828409905092915050565b6200042b620005d2565b60005b600115620004de576000600362000456856003620004fb640100000000026401000000009004565b019050620004a481600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47018115156200048e57fe5b04620004fb640100000000026401000000009004565b915080620004c3836002620004fb640100000000026401000000009004565b1415620004d15750620004de565b600184019350506200042e565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa15156200055d57600080fd5b80519250505092915050565b82602081019282156200059b579160200282015b828111156200059a5782518255916020019190600101906200057d565b5b509050620005aa9190620005ec565b5090565b61040060405190810160405280602090602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6200061191905b808211156200060d576000816000905550600101620005f3565b5090565b90565b60006200062182620006ab565b6200062d8185620006b6565b93506200063f818560208601620006cb565b80840191505092915050565b620006606200065a82620006c1565b62000701565b82525050565b600062000674828462000614565b915081905092915050565b60006200068d828562000614565b91506200069b82846200064b565b6020820191508190509392505050565b600081519050919050565b600081905092915050565b6000819050919050565b60005b83811015620006eb578082015181840152602081019050620006ce565b83811115620006fb576000848401525b50505050565b6000819050919050565b612419806200071b6000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c01000000000000000000000000000000000000000000000000000000009004806382d23b8a14610058578063d79e841314610088575b600080fd5b610072600480360361006d9190810190611e2e565b6100b8565b60405161007f9190612126565b60405180910390f35b6100a2600480360361009d9190810190611d75565b6100fe565b6040516100af91906120cb565b60405180910390f35b6100c06118d6565b6040518351815260208401516020820152825160408201526020830151606082015260408260808360065afa15156100f757600080fd5b5092915050565b60006101086118f0565b60408051908101604052808a600060028110151561012257fe5b60200201516001900481526020018a600160028110151561013f57fe5b6020020151600190048152508160000181905250604080519081016040528089600060028110151561016d57fe5b602002015160019004815260200189600160028110151561018a57fe5b602002015160019004815250816020018190525060408051908101604052808860006002811015156101b857fe5b60200201516001900481526020018860016002811015156101d557fe5b60200201516001900481525081604001819052508581606001818152505084816080018181525050604080519081016040528085600060028110151561021757fe5b602002015160019004815260200185600160028110151561023457fe5b6020020151600190048152508160a00181905250610250611940565b61025984610274565b905061026582826104e0565b92505050979650505050505050565b61027c611940565b610284611940565b604080519081016040528061029a8560006110db565b81526020016102aa8560206110db565b815250816000018190525060408051908101604052806102cb8560406110db565b81526020016102db8560606110db565b8152508160200181905250604080519081016040528060408051908101604052806103078760806110db565b81526020016103178760a06110db565b815250815260200160408051908101604052806103358760c06110db565b81526020016103458760e06110db565b815250815250816040018190525061035f836101006110db565b8160a0018181525050610374836101206110db565b816060018181525050610389836101406110db565b81608001818152505061039a6119a4565b6103a6846101606110db565b8160000181815250506103bb846101806110db565b816020018181525050808260c001819052506103d56119be565b60008090505b600581101561049557604080519081016040528061040088604085026101a0016110db565b815260200161041688604085026101c0016110db565b81525082600001518260058110151561042b57fe5b6020020181905250604080519081016040528061045288604085600501026101a0016110db565b815260200161046b88604085600501026101c0016110db565b81525082602001518260058110151561048057fe5b602002018190525080806001019150506103db565b506104a88560806005026101a0016110db565b8160400181815250506104c38560806005026101c0016110db565b816060018181525050808360e00181905250829350505050919050565b60006104ea6119f4565b61057761053c8560600151866080015187604001518860000151896020015160405160200161051d959493929190612201565b60405160208183030381529060405280519060200120600190046110f4565b8460000151856020015160405160200161055893929190612185565b60405160208183030381529060405280519060200120600190046110f4565b81600001818152505061058d8160000151611129565b81602001819052506105cc81600001516040516020016105ad9190612141565b60405160208183030381529060405280519060200120600190046110f4565b8160400181815250506105f0816040015182604001516111c690919063ffffffff16565b816060018181525050610614816040015182606001516111c690919063ffffffff16565b8160800181815250506106686084602080602002604051908101604052809291908260208015610659576020028201915b815481526020019060010190808311610645575b505050505082606001516111fd565b8160a001819052506106ad8160400151846040015160405160200161068e92919061215c565b60405160208183030381529060405280519060200120600190046110f4565b816101200181815250506107326106eb82608001516106dd602060020a85608001516111c690919063ffffffff16565b61126490919063ffffffff16565b6107246107098460600151856040015161126490919063ffffffff16565b61071685602001516112a4565b6111c690919063ffffffff16565b61126490919063ffffffff16565b8160c00181815250506107a66107648460400151600060028110151561075457fe5b60200201518361012001516112ef565b6107a18560400151600160028110151561077a57fe5b602002015161079c8561012001518661012001516111c690919063ffffffff16565b6112ef565b6100b8565b8160e001819052506107c98160c001518460a0015161126490919063ffffffff16565b816101000181815250506107db611a5a565b6107ec8460c001516000015161132a565b81600001818152505061084161082a6080604080519081016040529081600082015481526020016001820154815250508660c00151602001516112ef565b61083c876040015184600001516112ef565b6100b8565b816020018190525061088c6040805190810160405280600681526020017f5a657468657200000000000000000000000000000000000000000000000000008152508660800151611356565b81604001819052506108c46108ad82604001518660c00151602001516112ef565b6108bf8760a0015184600001516112ef565b6100b8565b81606001819052506109346108fb86600001516108f685606001518860c00151600001516111c690919063ffffffff16565b6112ef565b61092f876020015161092a61092587606001518a60c00151602001516111c690919063ffffffff16565b61132a565b6112ef565b6100b8565b8160800181905250610a086109d861098b6080604080519081016040529081600082015481526020016001820154815250506109868860c00151600001518761010001516111c690919063ffffffff16565b6112ef565b6109d36082604080519081016040529081600082015481526020016001820154815250506109ce8960c00151600001518a606001516111c690919063ffffffff16565b6112ef565b6100b8565b610a036109fe84608001516109f98760e001518a60c00151600001516112ef565b6100b8565b6113c6565b6100b8565b8160a001819052506000610a5c836101200151836020015184606001518560a00151604051602001610a3d94939291906121bc565b60405160208183030381529060405280519060200120600190046110f4565b90508460c001516000015181141515610aaa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610aa1906120e6565b60405180910390fd5b6000610af98660c00151600001518760a0015188606001518960800151604051602001610ada9493929190612255565b60405160208183030381529060405280519060200120600190046110f4565b9050610b036118d6565b610b2d608060408051908101604052908160008201548152602001600182015481525050836112ef565b9050610b37611ab0565b610b9d6040602080602002604051908101604052809291906000905b82821015610b8f578382600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190610b53565b50505050876020015161143f565b9050610ba7611adf565b610bc6610bbc886020015189604001516111fd565b8860a001516114b6565b9050610bd06118d6565b610c6e610bf38b60000151610bee8d602001518c61012001516112ef565b6100b8565b610c69610c576000602080602002604051908101604052809291906000905b82821015610c4e578382600202016040805190810160405290816000820154815260200160018201548152505081526020019060010190610c12565b5050505061152f565b610c648c6040015161132a565b6112ef565b6100b8565b9050610cc1610ca9610ca46082604080519081016040529081600082015481526020016001820154815250508d608001516112ef565b6113c6565b610cbc83610cb78787611577565b6100b8565b6100b8565b9050610cda81610cd5868d60a001516112ef565b6100b8565b9050610ce46119be565b8a60e001519050610cf3611b03565b60008090505b6005811015610e1357610d6588846000015183600581101515610d1857fe5b6020020151856020015184600581101515610d2f57fe5b6020020151604051602001610d4693929190612185565b60405160208183030381529060405280519060200120600190046110f4565b9750878282600581101515610d7657fe5b6020020181815250506000610d8a896115db565b9050610e03610dfd610dc5866000015185600581101515610da757fe5b6020020151610dc060028e61161190919063ffffffff16565b6112ef565b610df8876020015186600581101515610dda57fe5b6020020151610df360028761161190919063ffffffff16565b6112ef565b6100b8565b866100b8565b9450508080600101915050610cf9565b50610e1c611adf565b6001816000602081101515610e2d57fe5b60200201818152505060008090505b6005811015610ea257610e7d8382600581101515610e5657fe5b6020020151836000602081101515610e6a57fe5b60200201516111c690919063ffffffff16565b826000602081101515610e8c57fe5b6020020181815250508080600101915050610e3c565b50610eab611b26565b610ec7826000602081101515610ebd57fe5b60200201516115db565b826000602081101515610ed657fe5b60200201818152505060008090505b60026020811515610ef257fe5b04811015610ff55760008090505b6020828260019060020a02011015610fe95760008160019060020a02830190508381602081101515610f2e57fe5b60200201511515610fdd576000610f7e8784600160050303600581101515610f5257fe5b60200201518885600160050303600581101515610f6b57fe5b60200201516111c690919063ffffffff16565b9050610fa5818786602081101515610f9257fe5b60200201516111c690919063ffffffff16565b8683602081101515610fb357fe5b60200201818152505060018583602081101515610fcc57fe5b602002019015159081151581525050505b50806001019050610f00565b50806001019050610ee5565b50610ffe6118d6565b6110078361167e565b90506110116118d6565b61101b848a611700565b90506110256118d6565b61107561104c611039858a604001516112ef565b611047858b606001516112ef565b6100b8565b6110708d61106b8b606001518c604001516111c690919063ffffffff16565b6112ef565b6100b8565b9050611081888261176a565b15156110c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110b990612106565b60405180910390fd5b60019f5050505050505050505050505050505092915050565b6000604051826020850101518152805191505092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018281151561112157fe5b069050919050565b611131611adf565b600181600060208110151561114257fe5b6020020181815250508181600160208110151561115b57fe5b6020020181815250506000600290505b60208110156111c05761119c83836001840360208110151561118957fe5b60200201516111c690919063ffffffff16565b82826020811015156111aa57fe5b602002018181525050808060010191505061116b565b50919050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156111f257fe5b828409905092915050565b611205611adf565b60008090505b602081101561125d5761123983858360208110151561122657fe5b60200201516111c690919063ffffffff16565b828260208110151561124757fe5b602002018181525050808060010191505061120b565b5092915050565b6000818310156112985782827f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001030161129c565b8183035b905092915050565b600080600090505b60208110156112e9576112da83826020811015156112c657fe5b60200201518361179290919063ffffffff16565b915080806001019150506112ac565b50919050565b6112f76118d6565b604051835181526020840151602082015282604082015260408260608360075afa151561132357600080fd5b5092915050565b6000817f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001039050919050565b61135e6118d6565b6113be7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4784846040516020016113959291906120a3565b60405160208183030381529060405280519060200120600190048115156113b857fe5b066117c9565b905092915050565b6113ce6118d6565b6040805190810160405280836000015181526020017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47846020015181151561141257fe5b067f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47038152509050919050565b611447611ab0565b60008090505b60208110156114af5761148c848260208110151561146757fe5b6020020151611487858460208110151561147d57fe5b60200201516115db565b6112ef565b828260208110151561149a57fe5b6020020181905250808060010191505061144d565b5092915050565b6114be611adf565b60008090505b60208110156115285761150483826020811015156114de57fe5b602002015185836020811015156114f157fe5b602002015161179290919063ffffffff16565b828260208110151561151257fe5b60200201818152505080806001019150506114c4565b5092915050565b6115376118d6565b60008090505b60208110156115715761156282848360208110151561155857fe5b60200201516100b8565b9150808060010191505061153d565b50919050565b61157f6118d6565b60008090505b60208110156115d4576115c5826115c086846020811015156115a357fe5b602002015186856020811015156115b657fe5b60200201516112ef565b6100b8565b91508080600101915050611585565b5092915050565b600061160a8260027f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000103611611565b9050919050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa151561167257600080fd5b80519250505092915050565b6116866118d6565b60008090505b60208110156116fa576116eb826116e66000846020811015156116ab57fe5b600202016040805190810160405290816000820154815260200160018201548152505086856020811015156116dc57fe5b60200201516112ef565b6100b8565b9150808060010191505061168c565b50919050565b6117086118d6565b60008090505b6020811015611763576117548261174f858460208110151561172c57fe5b6020020151878560016020030360208110151561174557fe5b60200201516112ef565b6100b8565b9150808060010191505061170e565b5092915050565b60008160000151836000015114801561178a575081602001518360200151145b905092915050565b60007f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018015156117be57fe5b828408905092915050565b6117d16118d6565b60005b60011561184c57600060036117ea856003611869565b01905061182681600460017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd470181151561182057fe5b04611869565b915080611834836002611869565b1415611840575061184c565b600184019350506117d4565b604080519081016040528084815260200182815250915050919050565b6000807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060405160208152602080820152602060408201528460608201528360808201528160a082015260208160c08360055afa15156118ca57600080fd5b80519250505092915050565b604080519081016040528060008152602001600081525090565b61014060405190810160405280611905611b4a565b8152602001611912611b4a565b815260200161191f611b4a565b8152602001600081526020016000815260200161193a611b4a565b81525090565b61046060405190810160405280611955611b4a565b8152602001611962611b4a565b815260200161196f611b64565b8152602001600081526020016000815260200160008152602001611991611b92565b815260200161199e611bac565b81525090565b604080519081016040528060008152602001600081525090565b6102c0604051908101604052806119d3611be2565b81526020016119e0611be2565b815260200160008152602001600081525090565b6109206040519081016040528060008152602001611a10611c11565b8152602001600081526020016000815260200160008152602001611a32611c11565b815260200160008152602001611a46611b4a565b815260200160008152602001600081525090565b6101606040519081016040528060008152602001611a76611b4a565b8152602001611a83611b4a565b8152602001611a90611b4a565b8152602001611a9d611b4a565b8152602001611aaa611b4a565b81525090565b610800604051908101604052806020905b611ac9611b4a565b815260200190600190039081611ac15790505090565b61040060405190810160405280602090602082028038833980820191505090505090565b60a060405190810160405280600590602082028038833980820191505090505090565b61040060405190810160405280602090602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6080604051908101604052806002905b611b7c611b4a565b815260200190600190039081611b745790505090565b604080519081016040528060008152602001600081525090565b6102c060405190810160405280611bc1611be2565b8152602001611bce611be2565b815260200160008152602001600081525090565b610140604051908101604052806005905b611bfb611b4a565b815260200190600190039081611bf35790505090565b61040060405190810160405280602090602082028038833980820191505090505090565b600082601f8301121515611c4857600080fd5b6002611c5b611c56826122c7565b61229a565b91508183856020840282011115611c7157600080fd5b60005b83811015611ca15781611c878882611cab565b845260208401935060208301925050600181019050611c74565b5050505092915050565b6000611cb7823561237f565b905092915050565b600082601f8301121515611cd257600080fd5b8135611ce5611ce0826122e9565b61229a565b91508082526020830160208301858383011115611d0157600080fd5b611d0c838284612393565b50505092915050565b600060408284031215611d2757600080fd5b611d31604061229a565b90506000611d4184828501611d61565b6000830152506020611d5584828501611d61565b60208301525092915050565b6000611d6d8235612389565b905092915050565b6000806000806000806000610160888a031215611d9157600080fd5b6000611d9f8a828b01611c35565b9750506040611db08a828b01611c35565b9650506080611dc18a828b01611c35565b95505060c0611dd28a828b01611d61565b94505060e0611de38a828b01611d61565b935050610100611df58a828b01611c35565b92505061014088013567ffffffffffffffff811115611e1357600080fd5b611e1f8a828b01611cbf565b91505092959891949750929550565b60008060808385031215611e4157600080fd5b6000611e4f85828601611d15565b9250506040611e6085828601611d15565b9150509250929050565b6000611e768383612010565b60408301905092915050565b611e8b8161231f565b611e958184612342565b9250611ea082612315565b60005b82811015611ece57611eb6858351611e6a565b9450611ec182612335565b9150600181019050611ea3565b5050505050565b611ede81612369565b82525050565b6000611eef8261232a565b611ef9818561235e565b9350611f098185602086016123a2565b80840191505092915050565b6000611f22602a8361234d565b91507f5369676d612070726f746f636f6c206368616c6c656e676520657175616c697460008301527f79206661696c7572652e000000000000000000000000000000000000000000006020830152604082019050919050565b6000611f8860258361234d565b91507f496e6e65722070726f6475637420657175616c69747920636865636b2066616960008301527f6c7572652e0000000000000000000000000000000000000000000000000000006020830152604082019050919050565b604082016000820151611ff7600085018261206e565b50602082015161200a602085018261206e565b50505050565b604082016000820151612026600085018261206e565b506020820151612039602085018261206e565b50505050565b604082016000820151612055600085018261206e565b506020820151612068602085018261206e565b50505050565b61207781612375565b82525050565b61208681612375565b82525050565b61209d61209882612375565b6123d5565b82525050565b60006120af8285611ee4565b91506120bb828461208c565b6020820191508190509392505050565b60006020820190506120e06000830184611ed5565b92915050565b600060208201905081810360008301526120ff81611f15565b9050919050565b6000602082019050818103600083015261211f81611f7b565b9050919050565b600060408201905061213b6000830184611fe1565b92915050565b6000602082019050612156600083018461207d565b92915050565b600060a082019050612171600083018561207d565b61217e6020830184611e82565b9392505050565b600060a08201905061219a600083018661207d565b6121a7602083018561203f565b6121b4606083018461203f565b949350505050565b600060e0820190506121d1600083018761207d565b6121de602083018661203f565b6121eb606083018561203f565b6121f860a083018461203f565b95945050505050565b600061010082019050612217600083018861207d565b612224602083018761207d565b612231604083018661203f565b61223e608083018561203f565b61224b60c083018461203f565b9695505050505050565b600060808201905061226a600083018761207d565b612277602083018661207d565b612284604083018561207d565b612291606083018461207d565b95945050505050565b6000604051905081810181811067ffffffffffffffff821117156122bd57600080fd5b8060405250919050565b600067ffffffffffffffff8211156122de57600080fd5b602082029050919050565b600067ffffffffffffffff82111561230057600080fd5b601f19601f8301169050602081019050919050565b6000819050919050565b600060029050919050565b600081519050919050565b6000602082019050919050565b600081905092915050565b600082825260208201905092915050565b600081905092915050565b60008115159050919050565b6000819050919050565b6000819050919050565b6000819050919050565b82818337600083830152505050565b60005b838110156123c05780820151818401526020810190506123a5565b838111156123cf576000848401525b50505050565b600081905091905056fea265627a7a723058204aa9162d7d2b57ff9611e285296f25747ae6c893060c25010944fbfda985d66e6c6578706572696d656e74616cf50037',
            gas: '470000000'
        }, function(e, contract) {
            if (typeof contract.address !== 'undefined') {
                _burn = contract.address
                if (_zether && _burn) {
                    initZSC();
                }
            }
        });
        var initZSC = function() {
            var zkp = zkpContract.new(
                _zether,
                _burn, {
                    from: web3.eth.accounts[0],
                    data: '0x608060405234801561001057600080fd5b506040516040806107078339810180604052604081101561003057600080fd5b810190808051906020019092919080519060200190929190505050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505061062a806100dd6000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c0100000000000000000000000000000000000000000000000000000000900480631659e67d14610058578063d79e84131461025c575b600080fd5b610242600480360361014081101561006f57600080fd5b810190808035906020019064010000000081111561008c57600080fd5b82018360208201111561009e57600080fd5b803590602001918460408302840111640100000000831117156100c057600080fd5b9091929391929390803590602001906401000000008111156100e157600080fd5b8201836020820111156100f357600080fd5b8035906020019184604083028401116401000000008311171561011557600080fd5b90919293919293908035906020019064010000000081111561013657600080fd5b82018360208201111561014857600080fd5b8035906020019184604083028401116401000000008311171561016a57600080fd5b9091929391929390806040019091929192908035906020019064010000000081111561019557600080fd5b8201836020820111156101a757600080fd5b803590602001918460408302840111640100000000831117156101c957600080fd5b90919293919293908035906020019092919080604001909192919290803590602001906401000000008111156101fe57600080fd5b82018360208201111561021057600080fd5b8035906020019184600183028401116401000000008311171561023257600080fd5b909192939192939050505061032a565b604051808215151515815260200191505060405180910390f35b610310600480360361016081101561027357600080fd5b81019080806040019091929192908060400190919291929080604001909192919290803590602001909291908035906020019092919080604001909192919290803590602001906401000000008111156102cc57600080fd5b8201836020820111156102de57600080fd5b8035906020019184600183028401116401000000008311171561030057600080fd5b9091929391929390505050610496565b604051808215151515815260200191505060405180910390f35b60008060606000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600036604051808383808284378083019250505092505050600060405180830381855afa9150503d80600081146103ba576040519150601f19603f3d011682016040523d82523d6000602084013e6103bf565b606091505b509150915081801561046e575060017f01000000000000000000000000000000000000000000000000000000000000000281601f8151811015156103ff57fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b1561047e57600192505050610485565b6000925050505b9d9c50505050505050505050505050565b6000806060600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600036604051808383808284378083019250505092505050600060405180830381855afa9150503d8060008114610527576040519150601f19603f3d011682016040523d82523d6000602084013e61052c565b606091505b50915091508180156105db575060017f01000000000000000000000000000000000000000000000000000000000000000281601f81518110151561056c57fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b156105eb576001925050506105f2565b6000925050505b9897505050505050505056fea165627a7a72305820e3d505b81b9e243bd4f586ad3d79f783409484346f19832754ecc71be785225e0029',
                    gas: '4700000'
                },
                function(e, contract) {
                    if (typeof contract.address !== 'undefined') {
                        // var _coin = /* var of type address here */ ;
                        var _zkp = contract.address;
                        var _epochLength = 1; // magic number hardcoded. revisit
                        zsc = zscContract.new(
                            coin,
                            _zkp,
                            _epochLength, {
                                from: web3.eth.accounts[0],
                                data: '0x60806040526000600355600060095534801561001a57600080fd5b506040516060806128d38339810180604052606081101561003a57600080fd5b81019080805190602001909291908051906020019092919080519060200190929190505050826000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550806002819055505050506127da806100f96000396000f3fe608060405234801561001057600080fd5b50600436106100a5576000357c0100000000000000000000000000000000000000000000000000000000900480635ec7ccfd116100785780635ec7ccfd1461018457806373663b5f1461046157806380a25373146105a8578063b1537596146105fe576100a5565b806337f0d646146100aa5780635464befb146100d857806357d775f8146101105780635b7f82f41461012e575b600080fd5b6100d6600480360360408110156100c057600080fd5b8101908080604001909192919290505050610640565b005b61010e600480360360608110156100ee57600080fd5b81019080806040019091929192908035906020019092919050505061091d565b005b610118610d8f565b6040518082815260200191505060405180910390f35b61016e6004803603606081101561014457600080fd5b81019080803590602001909291908035906020019092919080359060200190929190505050610d95565b6040518082815260200191505060405180910390f35b61045f600480360360e081101561019a57600080fd5b81019080803590602001906401000000008111156101b757600080fd5b8201836020820111156101c957600080fd5b803590602001918460408302840111640100000000831117156101eb57600080fd5b9190808060200260200160405190810160405280939291908181526020016000905b82821015610264578484839050604002016002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050508152602001906001019061020d565b5050505050919291929080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050509192919290803590602001906401000000008111156102c857600080fd5b8201836020820111156102da57600080fd5b803590602001918460408302840111640100000000831117156102fc57600080fd5b9190808060200260200160405190810160405280939291908181526020016000905b82821015610375578484839050604002016002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050508152602001906001019061031e565b5050505050919291929080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f8201169050808301925050505050509192919290803590602001906401000000008111156103d957600080fd5b8201836020820111156103eb57600080fd5b8035906020019184600183028401116401000000008311171561040d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610dce565b005b6105a6600480360360c081101561047757600080fd5b8101908080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f82011690508083019250505050505091929192908035906020019092919080604001906002806020026040519081016040528092919082600260200280828437600081840152601f19601f82011690508083019250505050505091929192908035906020019064010000000081111561052057600080fd5b82018360208201111561053257600080fd5b8035906020019184600183028401116401000000008311171561055457600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611796565b005b6105e8600480360360608110156105be57600080fd5b810190808035906020019092919080359060200190929190803590602001909291905050506121b9565b6040518082815260200191505060405180910390f35b61062a6004803603602081101561061457600080fd5b81019080803590602001909291905050506121f2565b6040518082815260200191505060405180910390f35b60008160405160200180826002602002808284378083019250505091505060405160208183030381529060405280519060200120905061067e6124e1565b60046000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015610701578382600202016002806020026040519081016040528092919082600280156106ed576020028201915b8154815260200190600101908083116106d9575b5050505050815260200190600101906106a8565b505050509050600060010281600160028110151561071b57fe5b6020020151600160028110151561072e57fe5b602002015182600160028110151561074257fe5b6020020151600060028110151561075557fe5b602002015183600060028110151561076957fe5b6020020151600160028110151561077c57fe5b602002015184600060028110151561079057fe5b602002015160006002811015156107a357fe5b6020020151171717141515610820576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f4163636f756e7420616c726561647920726567697374657265642e000000000081525060200191505060405180910390fd5b336006600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604060048251377f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d46020820151527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f875602080830151015280600460008481526020019081526020016000209060026108eb92919061250f565b507fdac01a7bcbb991fb855039c695ae8f0c9c186486c283b1d8169cabc86434800360405160405180910390a1505050565b60008260405160200180826002602002808284378083019250505091505060405160208183030381529060405280519060200120905061095c8161220a565b63ffffffff82111515156109d8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f4465706f73697420616d6f756e74206f7574206f662072616e67652e0000000081525060200191505060405180910390fd5b63ffffffff600354830111151515610a3b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602881526020018061272f6028913960400191505060405180910390fd5b610a4361255f565b600560008381526020019081526020016000206000600281101515610a6457fe5b60020201600280602002604051908101604052809291908260028015610a9f576020028201915b815481526020019060010190808311610a8b575b50505050509050604051600182518252602083015160208301527f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d460408301527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f87560608301528460808301526040808301606060408501600060075af181169050604083608084600060065af181169050801515610b3c57600080fd5b505080600560008481526020019081526020016000206000600281101515610b6057fe5b60020201906002610b72929190612581565b506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd6006600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1630866040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b158015610c9e57600080fd5b505af1158015610cb2573d6000803e3d6000fd5b505050506040513d6020811015610cc857600080fd5b81019080805190602001909291905050501515610d4d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f5472616e736665722066726f6d2073656e646572206661696c65642e0000000081525060200191505060405180910390fd5b826003600082825401925050819055507ffca166bc9d2eded480543aa840c7dfc8e7e7027d84512a4f77defc0d3bbbc30160405160405180910390a150505050565b60025481565b600460205282600052604060002082600281101515610db057fe5b6002020181600281101515610dc157fe5b0160009250925050505481565b600083519050606081604051908082528060200260200182016040528015610e1057816020015b610dfd6125c1565b815260200190600190039081610df55790505b509050606082604051908082528060200260200182016040528015610e4f57816020015b610e3c6125c1565b815260200190600190039081610e345790505b509050828851141515610eca576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f496e707574206172726179206c656e677468206d69736d61746368210000000081525060200191505060405180910390fd5b60006001905060008090505b87518110156111ad5760008882815181101515610eef57fe5b906020019060200201516040516020018082600260200280838360005b83811015610f27578082015181840152602081019050610f0c565b50505050905001915050604051602081830303815290604052805190602001209050610f528161220a565b610f5a6124e1565b60056000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015610fdd57838260020201600280602002604051908101604052809291908260028015610fc9576020028201915b815481526020019060010190808311610fb5575b505050505081526020019060010190610f84565b505050509050604051815151815260208251015160208201526020840260208e010151516040820152602080850260208f0101510151606082015260408251608083600060065af1851694506020820151518152602080830151015160208201528b51604082015260208c0151606082015260406020830151608083600060065af18516945050806005600084815260200190815260200160002090600261108692919061250f565b5060046000838152602001908152602001600020600280602002604051908101604052809291906000905b8282101561110a578382600202016002806020026040519081016040528092919082600280156110f6576020028201915b8154815260200190600101908083116110e2575b5050505050815260200190600101906110b1565b505050509050604051815151815260208251015160208201526020840260208e010151516040820152602080850260208f01015101516060820152604060208502602089010151608083600060065af1851694506020820151518152602080830151015160208201528b51604082015260208c01516060820152604060208502602088010151608083600060065af1851694505050508080600101915050610ed6565b50600181141515611209576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612701602e913960400191505060405180910390fd5b60008090506000876040516020018082600260200280838360005b8381101561123f578082015181840152602081019050611224565b5050505090500191505060405160208183030381529060405280519060200120905060008090505b6008805490508110156112ab578160088281548110151561128457fe5b9060005260206000200154141561129e57600192506112ab565b8080600101915050611267565b5081151515611322576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4e6f6e636520616c7265616479207365656e210000000000000000000000000081525060200191505060405180910390fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631659e67d86868e8e8e6009548f8f6040518963ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001806020018060200189600260200280838360005b838110156113cc5780820151818401526020810190506113b1565b505050509050018060200188815260200187600260200280838360005b838110156114045780820151818401526020810190506113e9565b505050509050018060200186810386528e8181518152602001915080516000925b8184101561147057828490602001906020020151600260200280838360005b8381101561145f578082015181840152602081019050611444565b505050509050019260010192611425565b9250505086810385528d8181518152602001915080516000925b818410156114d557828490602001906020020151600260200280838360005b838110156114c45780820151818401526020810190506114a9565b50505050905001926001019261148a565b9250505086810384528c8181518152602001915080516000925b8184101561153a57828490602001906020020151600260200280838360005b8381101561152957808201518184015260208101905061150e565b5050505090500192600101926114ef565b9250505086810383528a8181518152602001915080516000925b8184101561159f57828490602001906020020151600260200280838360005b8381101561158e578082015181840152602081019050611573565b505050509050019260010192611554565b92505050868103825287818151815260200191508051906020019080838360005b838110156115db5780820151818401526020810190506115c0565b50505050905090810190601f1680156116085780820380516001836020036101000a031916815260200191505b509d505050505050505050505050505060206040518083038186803b15801561163057600080fd5b505afa158015611644573d6000803e3d6000fd5b505050506040513d602081101561165a57600080fd5b810190808051906020019092919050505015156116c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260238152602001806127576023913960400191505060405180910390fd5b60088190806001815401808255809150509060018203906000526020600020016000909192909190915055507f4ef6ed22b1551aeadeb80e67bb3a38788491e81527cc70a85bff611e9e51e18a8960405180806020018281038252838181518152602001915080516000925b8184101561177957828490602001906020020151600260200280838360005b8381101561176857808201518184015260208101905061174d565b50505050905001926001019261172e565b925050509250505060405180910390a15050505050505050505050565b6000846040516020018082600260200280838360005b838110156117c75780820151818401526020810190506117ac565b505050509050019150506040516020818303038152906040528051906020012090506117f28161220a565b600073ffffffffffffffffffffffffffffffffffffffff166006600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515156118ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f556e72656769737465726564206163636f756e7421000000000000000000000081525060200191505060405180910390fd5b836000111580156118df575063ffffffff8411155b1515611953576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f5472616e7366657220616d6f756e74206f7574206f662072616e67652e00000081525060200191505060405180910390fd5b61195b6124e1565b60056000838152602001908152602001600020600280602002604051908101604052809291906000905b828210156119de578382600202016002806020026040519081016040528092919082600280156119ca576020028201915b8154815260200190600101908083116119b6575b505050505081526020019060010190611985565b5050505090506001604051825151815260208351015160208201527f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d460408201527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f8756060820152867f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000010360808201526040808201606060408401600060075af18216915060408351608083600060065af182169150811515611a9f57600080fd5b50508060056000848152602001908152602001600020906002611ac392919061250f565b5060046000838152602001908152602001600020600280602002604051908101604052809291906000905b82821015611b4757838260020201600280602002604051908101604052809291908260028015611b33576020028201915b815481526020019060010190808311611b1f575b505050505081526020019060010190611aee565b5050505090506001604051825151815260208351015160208201527f077da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d460408201527f01485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f8756060820152867f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000010360808201526040808201606060408401600060075af18216915060408351608083600060065af182169150811515611c0857600080fd5b505060008090506000856040516020018082600260200280838360005b83811015611c40578082015181840152602081019050611c25565b5050505090500191505060405160208183030381529060405280519060200120905060008090505b600880549050811015611cac5781600882815481101515611c8557fe5b90600052602060002001541415611c9f5760019250611cac565b8080600101915050611c68565b5081151515611d23576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4e6f6e636520616c7265616479207365656e210000000000000000000000000081525060200191505060405180910390fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d79e8413846000600281101515611d7057fe5b6020020151856001600281101515611d8457fe5b60200201518b8b6009548c8c6040518863ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018088600260200280838360005b83811015611de6578082015181840152602081019050611dcb565b5050505090500187600260200280838360005b83811015611e14578082015181840152602081019050611df9565b5050505090500186600260200280838360005b83811015611e42578082015181840152602081019050611e27565b5050505090500185815260200184815260200183600260200280838360005b83811015611e7c578082015181840152602081019050611e61565b5050505090500180602001828103825283818151815260200191508051906020019080838360005b83811015611ebf578082015181840152602081019050611ea4565b50505050905090810190601f168015611eec5780820380516001836020036101000a031916815260200191505b509850505050505050505060206040518083038186803b158015611f0f57600080fd5b505afa158015611f23573d6000803e3d6000fd5b505050506040513d6020811015611f3957600080fd5b81019080805190602001909291905050501515611fbe576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f4275726e2070726f6f6620766572696669636174696f6e206661696c6564210081525060200191505060405180910390fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb6006600087815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16896040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1580156120b557600080fd5b505af11580156120c9573d6000803e3d6000fd5b505050506040513d60208110156120df57600080fd5b81019080805190602001909291905050501515612147576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603581526020018061277a6035913960400191505060405180910390fd5b8660036000828254039250508190555060088190806001815401808255809150509060018203906000526020600020016000909192909190915055507f40456e504254d84bf7f94f9976a7bf3b49907c184aa8097866e004497dcfe65b60405160405180910390a15050505050505050565b6005602052826000526040600020826002811015156121d457fe5b60020201816002811015156121e557fe5b0160009250925050505481565b60076020528060005260406000206000915090505481565b60006002544381151561221957fe5b04905080600760008481526020019081526020016000205410156124bd5761223f6125e3565b604080519081016040528060046000868152602001908152602001600020600280602002604051908101604052809291906000905b828210156122cd578382600202016002806020026040519081016040528092919082600280156122b9576020028201915b8154815260200190600101908083116122a5575b505050505081526020019060010190612274565b50505050815260200160056000868152602001908152602001600020600280602002604051908101604052809291906000905b8282101561235957838260020201600280602002604051908101604052809291908260028015612345576020028201915b815481526020019060010190808311612331575b505050505081526020019060010190612300565b505050508152509050600160405182515151815260208351510151602082015260208301515151604082015260208084015151015160608201526040835151608083600060065af1821691506020835101515181526020808451015101516020820152602080840151015151604082015260208060208501510151015160608201526040602084510151608083600060065af1821691508115156123fc57600080fd5b505080600060028110151561240d57fe5b60200201516004600085815260200190815260200160002090600261243392919061250f565b506040805190810160405280604080519081016040528060006001028152602001600060010281525081526020016040805190810160405280600060010281526020016000600102815250815250600560008581526020019081526020016000209060026124a292919061250f565b50816007600085815260200190815260200160002081905550505b8060095410156124dd5780600981905550600860006124dc9190612612565b5b5050565b6080604051908101604052806002905b6124f96125c1565b8152602001906001900390816124f15790505090565b8260028002810192821561254e579160200282015b8281111561254d5782518290600261253d929190612633565b5091602001919060020190612524565b5b50905061255b9190612673565b5090565b6040805190810160405280600290602082028038833980820191505090505090565b82600281019282156125b0579160200282015b828111156125af578251825591602001919060010190612594565b5b5090506125bd919061269f565b5090565b6040805190810160405280600290602082028038833980820191505090505090565b610100604051908101604052806002905b6125fc6126c4565b8152602001906001900390816125f45790505090565b5080546000825590600052602060002090810190612630919061269f565b50565b8260028101928215612662579160200282015b82811115612661578251825591602001919060010190612646565b5b50905061266f919061269f565b5090565b61269c91905b80821115612698576000818161268f91906126f2565b50600201612679565b5090565b90565b6126c191905b808211156126bd5760008160009055506001016126a5565b5090565b90565b6080604051908101604052806002905b6126dc6125c1565b8152602001906001900390816126d45790505090565b50600081556001016000905556fe456c6c6970746963206375727665206f7065726174696f6e73206661696c7572652e2042616420706f696e74733f46756e642070757368657320636f6e74726163742070617374206d6178696d756d2076616c75652e5472616e736665722070726f6f6620766572696669636174696f6e206661696c656421546869732073686f756c646e2774206661696c2e2e2e20536f6d657468696e672077656e74207365766572656c792077726f6e672ea165627a7a72305820bf5e9ff035c66304ed4100ecf172a7a110bac097f8c7a79c6a5c50dbe6412cd20029',
                                gas: '4700000'
                            },
                            function(e, contract) {
                                if (typeof contract.address !== 'undefined') {
                                    console.log("ZSC deployed at address \"" + contract.address + "\".");
                                    zsc = zscContract.at(contract.address);
                                }
                            }
                        );
                    }
                }
            );
        }
        return "Deploying contracts.";
    },
    recoverZSC: function(address) {
        zsc = zscContract.at(address);
        return "Recovered.";
    },
};

function tracker() {
    var that = this;

    var keypair = zether.createAccount(); // private
    var yHash = web3.sha3(keypair['y'][0].slice(2) + keypair['y'][1].slice(2), { encoding: 'hex' });
    var friends = {};
    var table = {}; // key: txHash of a transfer that _I_ originated, value: callback.
    var epochLength = zsc.epochLength(); // could retain this locally
    var home = eth.accounts[0]; // register this once and for all
    var throwaway;

    var state = function() {
        this.available = 0; // reflects WOULD-BE value in acc (i.e., if rollOver were called). do not touch this manually
        this.pending = 0; // represents an estimate of pTransfers alone. this is used to speed up peeking when transfers are received
        this.nonceUsed = false;
        this.lastRollOver = 0; // would it make sense to just pull this directly every time...?!
    }
    this.state = new state();

    this.restock = function() {
        throwaway = web3.personal.newAccount("");
        web3.personal.unlockAccount(throwaway, "", 0);
    }

    var getEpoch = function(blockNumber) {
        return Math.floor((blockNumber === undefined ? eth.blockNumber + 1 : blockNumber) / epochLength);
    }

    var match = function(address, candidate) {
        return address[0] == candidate[0] && address[1] == candidate[1];
    } // consider refactoring / eliminating this, e.g. using JSON.stringify

    var away = function() { return Math.ceil((eth.blockNumber + 1) / epochLength) * epochLength - (eth.blockNumber + 1); }

    var simulateAccount = function(address) { // "baby" version of the below which will be used for _foreign_ accounts.
        var yHash = web3.sha3(address[0].slice(2) + address[1].slice(2), { encoding: 'hex' });
        var updated = new state();
        updated.acc = [
            [zsc.acc(yHash, 0, 0), zsc.acc(yHash, 0, 1)],
            [zsc.acc(yHash, 1, 0), zsc.acc(yHash, 1, 1)]
        ];
        if (zsc.lastRollOver(yHash) < getEpoch()) {
            var pTransfers = [
                [zsc.pTransfers(yHash, 0, 0), zsc.pTransfers(yHash, 0, 1)],
                [zsc.pTransfers(yHash, 1, 0), zsc.pTransfers(yHash, 1, 1)]
            ];
            updated.acc = zether.add(updated.acc, pTransfers);
        }
        return updated;
    }

    this.simulateBalances = function(blockNumber) {
        var updated = new state();
        updated.available = this.state.available;
        updated.pending = this.state.pending;
        updated.nonceUsed = this.state.nonceUsed;
        updated.lastRollOver = getEpoch(blockNumber)

        if (this.state.lastRollOver < updated.lastRollOver) {
            // if you're _receiving_ a transfer _and_ your account _was stale_, then whoever just sent you something
            // necessarily rolled you over _BEFORE_ depositing an extra amount into your pTransfers.
            // therefore folding this stuff in would lead to an innacurate representation of your account state.
            updated.available += updated.pending;
            updated.pending = 0;
            updated.nonceUsed = false;
        }
        return updated;
    }

    zsc.TransferOccurred(function(error, event) { // automatically watch for incoming transfers
        if (error) {
            console.log("Error: " + error);
        } else if (event.transactionHash in table) {
            table[event.transactionHash]();
        } else {
            for (var i = 0; i < event.args['parties'].length; i++) { // (var party in event.args['parties']) { // var in doesn't work for nested arrays?
                if (that.mine(event.args['parties'][i])) { // weird: this will trigger even when you were the sender.
                    that.state = that.simulateBalances(event.blockNumber);
                    var value;
                    if (value = that.check()) // if rollOver happens remotely, will mimic it locally, and start from 0
                        console.log("Transfer of " + value + " received! New balance is " + (that.state.available + that.state.pending) + ".");
                    // interesting: impossible even to know who sent you funds.
                    // could always report back msg.sender, but that means nothing basically. can always send from different eth address
                    break;
                }
            }
        }
    });

    // todo: add a way to generate throwaway addresses (for receiving), as well as to consolidate throwaways.

    this.me = function() { return keypair.y }

    this.secret = function() { return keypair.x; }

    this.mine = function(address) { return match(address, keypair['y']); }

    this.friend = function(name, address) {
        friends[name] = address;
        return "Friend added.";
    }

    this.balance = function() { return this.state.available + this.state.pending; }

    this.friends = function() { return friends; }

    this.check = function() { // would save a few dereferences to pass in the state, but...
        var pending = this.state.pending;
        var pTransfers = [
            [zsc.pTransfers(yHash, 0, 0), zsc.pTransfers(yHash, 0, 1)],
            [zsc.pTransfers(yHash, 1, 0), zsc.pTransfers(yHash, 1, 1)]
        ];
        this.state.pending = zether.readBalance(pTransfers, keypair['x'], this.state.pending, 4294967295);
        return this.state.pending - pending; // just a shortcut
    }

    this.deposit = function(value) {
        var state = this.simulateBalances();
        var events = zsc.FundOccurred();
        var timer = setTimeout(function() {
            events.stopWatching();
            console.log("Deposit failed...")
        }, 5000);
        zsc.fund(keypair['y'], value, { from: home, gas: 5470000 }, function(error, txHash) {
            if (error) {
                console.log("Error: " + error);
            } else {
                events.watch(function(error, event) {
                    if (error) {
                        console.log("Error: " + error);
                    } else if (txHash == event.transactionHash) {
                        clearTimeout(timer);
                        state.pending += value;
                        that.state = state;
                        console.log("Deposit of " + value + " successful. Balance is now " + (state.available + state.pending) + ".");
                        events.stopWatching();
                    }
                });
            }
        });
        return "Initiating deposit.";
    }

    this.transfer = function(name, value, decoys) { // assuming the names of the other people in the anonymity set are being provided?
        var state = this.simulateBalances();
        if (value > state.available + state.pending)
            throw "Requested transfer amount of " + value + " exceeds account balance of " + (state.available + state.pending) + ".";
        else {
            var wait = away();
            var plural = wait == 1 ? "" : "s";
            if (value > state.available)
                throw "Requested transfer amount of " + value + " exceeds presently available balance of " + state.available + ". Please wait until the next rollover (" + wait + " block" + plural + " away), at which point you'll have " + (state.available + state.pending) + " available.";
            else if (state.nonceUsed)
                throw "You've already made a transfer/withdrawal during this epoch! Please wait till the next one, " + wait + " block" + plural + " away.";
        }

        if (decoys && decoys.length % 2 == 1)
            throw "Please choose a decoys set of even length (add one or remove one)."

        if (!(name in friends))
            throw "Name \"" + name + "\" hasn't been friended yet!";
        var y = [this.me()].concat([friends[name]]); // not yet shuffled
        for (var i = 0; i < (decoys ? decoys.length : 0); i++) {
            if (!(decoys[i] in friends))
                throw "Decoy \"" + decoys[i] + "\" is unknown in friends directory!";
            y.push(friends[decoys[i]])
        }

        var index = [];
        var m = y.length;
        while (m != 0) { // https://bost.ocks.org/mike/shuffle/
            var i = Math.floor(Math.random() * m--);
            var temp = y[i];
            y[i] = y[m];
            y[m] = temp;
            if (this.mine(temp))
                index[0] = m;
            else if (match(temp, friends[name]))
                index[1] = m;
        } // shuffle the array of y's
        if (index[0] % 2 == index[1] % 2) {
            var temp = y[index[1]];
            y[index[1]] = y[index[1] + (index[1] % 2 == 0 ? 1 : -1)];
            y[index[1] + (index[1] % 2 == 0 ? 1 : -1)] = temp;
            index[1] = index[1] + (index[1] % 2 == 0 ? 1 : -1);
        } // make sure you and your friend have opposite parity

        var CL = [];
        var CR = [];
        for (var i = 0; i < y.length; i++) { // (var address in y) { // could use an array.map if i had a better javascript shell.
            var updated = simulateAccount(y[i]);
            CL.push(updated.acc[0]);
            CR.push(updated.acc[1]);
        }

        var proof = zether.proveTransfer(CL, CR, y, state.lastRollOver, keypair['x'], value, state.available - value, index);
        var timer = setTimeout(function() {
            console.log("Transfer failed...");
            // can't, but don't actually need to, delete txHash from the table.
        }, 5000);
        zsc.transfer(proof["L"], proof["R"], y, proof['u'], proof['proof'], { from: throwaway, gas: 547000000 }, function(error, txHash) {
            if (error) {
                console.log("Error: " + error);
            } else {
                table[txHash] = function(error, event) { // event arg not used?
                    if (error) {
                        console.log("Error: " + error);
                    } else {
                        clearTimeout(timer);
                        state.nonceUsed = true;
                        state.pending -= value;
                        that.state = state;
                        console.log("Transfer of " + value + " was successful. Balance now " + (state.available + state.pending) + ".");
                        that.restock(); // trying to hide this from the viewer!
                    }
                };
            }
        });
        return "Initiating transfer.";
    }

    this.withdraw = function(value) {
        var state = this.simulateBalances();
        if (value > state.available + state.pending)
            throw "Requested withdrawal amount of " + value + " exceeds account balance of " + (state.available + state.pending) + ".";
        else {
            var wait = away();
            var plural = wait == 1 ? "" : "s";
            if (value > state.available)
                throw "Requested withdrawal amount of " + value + " exceeds presently available balance of " + state.available + ". Please wait until the next rollover (" + wait + " block" + plural + " away), at which point you'll have " + (state.available + state.pending) + " available.";
            else if (state.nonceUsed)
                throw "You've already made a transfer/withdrawal during this epoch! Please wait till the next one, " + wait + " block" + plural + " away.";
        }
        var updated = simulateAccount(keypair['y']);
        var proof = zether.proveBurn(updated.acc[0], updated.acc[1], keypair['y'], value, state.lastRollOver, keypair['x'], state.available - value);
        var events = zsc.BurnOccurred();
        var timer = setTimeout(function() {
            events.stopWatching();
            console.log("Withdrawal failed...")
        }, 5000);
        zsc.burn(keypair['y'], value, proof['u'], proof['proof'], { from: home, gas: 547000000 }, function(error, txHash) {
            if (error) {
                console.log("Error: " + error);
            } else {
                events.watch(function(error, event) {
                    if (error) {
                        console.log("Error: " + error);
                    } else if (txHash == event.transactionHash) {
                        clearTimeout(timer);
                        state.pending -= value;
                        state.nonceUsed = true; // or: after confirming, that.state.nonceUsed = true.
                        that.state = state;
                        console.log("Withdrawal of " + value + " was successful. Balance now " + (state.available + state.pending) + ".");
                        events.stopWatching();
                    }
                });
            }
        });
        return "Initiating withdrawal.";
    }

    var register = zsc.RegistrationOccurred();
    var timer = setTimeout(function() {
        register.stopWatching();
        console.log("Initial registration failed...!")
    }, 5000);
    zsc.register(keypair['y'], { from: home, gas: 5470000 }, function(error, txHash) {
        if (error) {
            console.log("Error: " + error);
        } else {
            register.watch(function(error, event) {
                if (error) {
                    console.log("Error: " + error);
                } else if (txHash == event.transactionHash) {
                    clearTimeout(timer);
                    console.log("Initial registration successful.");
                    register.stopWatching();
                    that.restock();
                }
            });
        }
    });
}